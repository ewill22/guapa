<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee | Guapa</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="music.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Newsreader:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    <style>
        /* Coffee Map Styles */
        .journey-section {
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-lg);
            border-bottom: 1px solid var(--gray-800);
        }

        .map-container {
            position: relative;
            margin-bottom: 24px;
        }

        .map-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 16px;
        }

        .map-arrow {
            background: transparent;
            border: 2px solid var(--gray-800);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--gray-400);
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .map-arrow:hover {
            border-color: var(--yellow);
            color: var(--yellow);
        }

        .map-arrow:active {
            background: var(--yellow);
            color: var(--black);
        }

        .region-display {
            flex: 1;
            text-align: center;
        }

        .region-display h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--yellow);
            margin-bottom: 4px;
        }

        .region-display p {
            color: var(--gray-400);
            font-size: 0.9rem;
        }

        .world-map {
            width: 100%;
            height: 320px;
            position: relative;
            background: var(--gray-900);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--gray-800);
        }

        .world-map svg {
            width: 100%;
            height: 100%;
        }

        .map-region {
            fill: var(--gray-800);
            stroke: var(--gray-700);
            stroke-width: 0.5;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .map-region:hover {
            fill: var(--gray-700);
        }

        .map-region.highlight {
            fill: var(--yellow);
            stroke: var(--yellow);
        }

        .map-label {
            fill: var(--gray-600);
            font-size: 10px;
            font-weight: 600;
            text-anchor: middle;
            pointer-events: none;
            text-transform: uppercase;
        }

        .map-label.highlight {
            fill: var(--yellow);
        }

        .region-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
        }

        .region-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--gray-700);
            cursor: pointer;
            transition: all 0.2s;
        }

        .region-dot:hover {
            background: var(--gray-500);
        }

        .region-dot.active {
            background: var(--yellow);
            transform: scale(1.2);
        }

        .countries-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 24px;
            justify-content: center;
        }

        .country-chip {
            background: transparent;
            border: 2px solid var(--gray-800);
            border-radius: 8px;
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            min-width: 120px;
        }

        .country-chip:hover {
            border-color: var(--pink);
            background: rgba(232, 160, 176, 0.05);
        }

        .country-chip.active {
            border-color: var(--pink);
            background: rgba(232, 160, 176, 0.1);
        }

        .country-chip .flag {
            font-size: 1.5rem;
        }

        .country-chip .name {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .country-chip:hover .name,
        .country-chip.active .name {
            color: var(--pink);
        }

        /* Producer Panel */
        .producer-panel {
            display: none;
            background: var(--gray-900);
            border: 2px solid var(--pink);
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            position: relative;
        }

        .producer-panel.visible {
            display: block;
        }

        .producer-panel-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 14px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-800);
        }

        .producer-panel-header .icon {
            font-size: 2rem;
        }

        .producer-panel-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--yellow);
        }

        .producer-panel-header .region-tag {
            font-size: 0.75rem;
            color: var(--gray-400);
            margin-top: 2px;
        }

        .producer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 14px;
        }

        .producer-card {
            background: transparent;
            border: 1px solid var(--gray-800);
            border-radius: 6px;
            padding: 16px 16px 20px 16px;
            transition: all 0.2s;
        }

        .producer-card:hover {
            border-color: var(--pink);
        }

        .roast-links {
            display: flex;
            gap: 6px;
            flex-wrap: nowrap;
        }

        .roast-link {
            font-size: 0.6rem;
            font-weight: 600;
            padding: 5px 7px;
            background: transparent;
            border: 1px solid;
            border-radius: 3px;
            text-decoration: none;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            white-space: nowrap;
        }

        .roast-link.roaster {
            color: #c4a77d;
            border-color: #c4a77d;
        }

        .roast-link.info {
            color: var(--blue, #88a8d4);
            border-color: var(--blue, #88a8d4);
        }

        .roast-link.buy {
            color: var(--yellow);
            border-color: var(--yellow);
        }

        .roast-link:hover {
            background: currentColor;
            color: var(--black);
        }

        .close-panel {
            position: absolute;
            top: 12px;
            right: 12px;
            background: transparent;
            border: 1px solid var(--gray-800);
            border-radius: 4px;
            color: var(--gray-600);
            width: 28px;
            height: 28px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-panel:hover {
            border-color: var(--pink);
            color: var(--pink);
        }

        .keyboard-hint {
            text-align: center;
            margin-top: 12px;
            font-size: 0.7rem;
            color: var(--gray-600);
        }

        .keyboard-hint kbd {
            background: var(--gray-800);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: inherit;
        }

        /* Active region highlight in sidebar */
        .genre-link.filter-active {
            color: var(--yellow) !important;
            background: rgba(240, 192, 20, 0.1);
        }

        .genre-link.filter-active::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 4px;
            background: var(--yellow);
            border-radius: 50%;
            margin-right: var(--space-xs);
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <a href="index.html" class="nav-logo">
            <img src="guapa_logo_dark.png" alt="Guapa" class="logo-img">
            <span class="logo-text" style="font-size: 1.8rem;">GUAPA <span style="font-size: 0.6rem; font-weight: 400; vertical-align: middle;">inc</span></span>
        </a>
        
        <div class="nav-links">
            <a href="music.html">Music</a>
            <a href="coffee.html">Coffee</a>
            <a href="index.html#shop">Data</a>
            <a href="index.html#shop">Photography</a>
            <a href="index.html#about">About</a>
        </div>

        <div class="nav-actions">
            <a href="https://instagram.com/guapa_skate" target="_blank" rel="noopener" class="nav-social">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
            </a>
            <a href="shop.html" class="nav-cart">Shop ‚Üí</a>
        </div>

        <button class="nav-toggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
        </button>
    </nav>

    <main class="music-page">
        <!-- Page Header -->
        <header class="music-header" style="padding: var(--space-md); border-bottom: 1px solid var(--gray-800);">
            <div class="music-header-text">
                <h1>Coffee</h1>
                <p>Origins, producers, and roasts from around the world</p>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="music-layout">
            <!-- Sidebar -->
            <aside class="music-sidebar">
                <div class="sidebar-section">
                    <h3>Regions</h3>
                    <ul class="genre-list" id="regionList">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="music-main">
                <!-- Coffee Map Section -->
                <section class="journey-section">
                    <div class="map-container">
                        <div class="map-nav">
                            <button class="map-arrow" id="prevRegion">‚Üê</button>
                            <div class="region-display">
                                <h2 id="regionName">AFRICA</h2>
                                <p id="regionDesc">The birthplace of coffee</p>
                            </div>
                            <button class="map-arrow" id="nextRegion">‚Üí</button>
                        </div>

                        <div class="world-map" id="worldMap">
                            <svg viewBox="0 0 1000 500" preserveAspectRatio="xMidYMid meet">
                                <!-- More accurate world map paths -->
                                
                                <!-- North America -->
                                <path class="map-region" d="M45,125 L55,95 L75,70 L110,50 L150,40 L190,45 L220,55 L245,75 L255,100 L250,130 L235,155 L210,170 L185,175 L165,172 L145,178 L125,172 L105,155 L80,140 L55,135 Z"/>
                                
                                <!-- Greenland -->
                                <path class="map-region" d="M285,30 L310,22 L340,28 L360,50 L355,80 L335,95 L305,90 L285,65 L280,45 Z"/>
                                
                                <!-- Central America & Mexico -->
                                <path class="map-region" data-region="central_america" d="M125,178 L145,175 L162,180 L168,195 L160,212 L148,228 L135,238 L120,235 L112,218 L115,198 Z"/>
                                
                                <!-- Caribbean Islands -->
                                <ellipse class="map-region" data-region="central_america" cx="185" cy="205" rx="6" ry="4"/>
                                <ellipse class="map-region" data-region="central_america" cx="198" cy="212" rx="5" ry="3"/>
                                <ellipse class="map-region" data-region="central_america" cx="210" cy="208" rx="4" ry="3"/>
                                <ellipse class="map-region" data-region="central_america" cx="220" cy="215" rx="4" ry="2"/>
                                
                                <!-- South America -->
                                <path class="map-region" data-region="south_america" d="M148,242 L175,238 L205,245 L228,258 L248,285 L260,325 L258,375 L245,415 L218,445 L185,455 L158,438 L148,400 L142,355 L145,305 L150,268 Z"/>
                                
                                <!-- Europe -->
                                <path class="map-region" d="M420,50 L445,42 L475,45 L510,55 L535,72 L545,98 L540,125 L520,142 L490,148 L460,145 L435,132 L420,110 L415,82 L418,60 Z"/>
                                
                                <!-- UK/Ireland hint -->
                                <ellipse class="map-region" cx="405" cy="85" rx="8" ry="12"/>
                                
                                <!-- Africa -->
                                <path class="map-region" data-region="africa" d="M435,158 L465,152 L500,155 L535,168 L560,192 L575,230 L582,280 L578,335 L560,378 L528,410 L485,425 L445,415 L418,385 L402,340 L395,285 L398,235 L410,195 L425,170 Z"/>
                                
                                <!-- Madagascar -->
                                <ellipse class="map-region" data-region="africa" cx="572" cy="385" rx="8" ry="18"/>
                                
                                <!-- Middle East / Arabian Peninsula -->
                                <path class="map-region" data-region="middle_east" d="M555,135 L585,125 L615,138 L635,165 L628,200 L605,225 L575,235 L555,215 L548,175 L550,150 Z"/>
                                
                                <!-- Russia / Northern Asia -->
                                <path class="map-region" d="M545,35 L620,25 L700,30 L780,42 L850,58 L910,78 L895,98 L850,95 L780,85 L700,78 L620,72 L560,68 L545,52 Z"/>
                                
                                <!-- India -->
                                <path class="map-region" data-region="asia_pacific" d="M638,168 L670,155 L702,165 L718,195 L715,235 L698,275 L668,295 L642,275 L635,235 L632,198 Z"/>
                                
                                <!-- Sri Lanka -->
                                <ellipse class="map-region" data-region="asia_pacific" cx="685" cy="305" rx="6" ry="8"/>
                                
                                <!-- China / East Asia -->
                                <path class="map-region" d="M700,75 L760,65 L820,78 L865,105 L875,145 L858,180 L820,195 L770,188 L735,168 L718,135 L710,100 Z"/>
                                
                                <!-- Southeast Asia mainland -->
                                <path class="map-region" data-region="asia_pacific" d="M720,195 L755,185 L785,198 L798,235 L788,275 L760,295 L732,285 L718,250 L715,218 Z"/>
                                
                                <!-- Indonesia archipelago -->
                                <path class="map-region" data-region="asia_pacific" d="M738,305 L775,298 L815,305 L855,318 L885,335 L878,358 L840,365 L795,362 L755,352 L735,335 Z"/>
                                
                                <!-- Borneo -->
                                <ellipse class="map-region" data-region="asia_pacific" cx="788" cy="285" rx="15" ry="18"/>
                                
                                <!-- Philippines -->
                                <path class="map-region" data-region="asia_pacific" d="M818,205 L830,198 L838,215 L835,245 L822,260 L812,248 L815,225 Z"/>
                                
                                <!-- Papua New Guinea -->
                                <path class="map-region" data-region="asia_pacific" d="M895,318 L928,308 L955,328 L948,362 L918,375 L892,358 Z"/>
                                
                                <!-- Australia -->
                                <path class="map-region" d="M815,388 L868,375 L920,392 L955,435 L942,478 L895,495 L838,485 L798,455 L788,415 L795,392 Z"/>
                                
                                <!-- New Zealand hint -->
                                <ellipse class="map-region" cx="965" cy="465" rx="8" ry="15"/>
                                
                                <!-- Japan -->
                                <path class="map-region" d="M868,95 L882,88 L895,102 L892,135 L878,155 L865,145 L862,118 Z"/>
                                
                                <!-- Taiwan -->
                                <ellipse class="map-region" cx="835" cy="195" rx="5" ry="8"/>
                                
                                <!-- Coffee Belt lines -->
                                <line x1="30" y1="190" x2="970" y2="190" stroke="var(--yellow)" stroke-width="1" stroke-dasharray="4,4" opacity="0.12"/>
                                <line x1="30" y1="320" x2="970" y2="320" stroke="var(--yellow)" stroke-width="1" stroke-dasharray="4,4" opacity="0.12"/>
                                
                                <!-- Region Labels -->
                                <text x="140" y="255" class="map-label" data-region="central_america">C. America</text>
                                <text x="200" y="365" class="map-label" data-region="south_america">S. America</text>
                                <text x="485" y="300" class="map-label" data-region="africa">Africa</text>
                                <text x="590" y="185" class="map-label" data-region="middle_east">Yemen</text>
                                <text x="820" y="380" class="map-label" data-region="asia_pacific">Asia Pacific</text>
                            </svg>
                        </div>

                        <div class="region-dots" id="regionDots">
                            <!-- Populated by JS -->
                        </div>

                        <p class="keyboard-hint">Use <kbd>‚Üê</kbd> <kbd>‚Üí</kbd> arrow keys to navigate</p>
                    </div>

                    <div class="countries-grid" id="countriesGrid">
                        <!-- Populated by JS -->
                    </div>

                    <div class="producer-panel" id="producerPanel">
                        <button class="close-panel" onclick="closeProducerPanel()">‚úï</button>
                        <div class="producer-panel-header">
                            <span class="icon" id="countryIcon">üá™üáπ</span>
                            <div>
                                <h3 id="countryName">ETHIOPIA</h3>
                                <p class="region-tag" id="countryRegion">AFRICA</p>
                            </div>
                        </div>
                        <div class="producer-grid" id="producerGrid"></div>
                    </div>
                </section>

                <!-- Posts / Notes Section -->
                <section class="music-posts">
                    <div class="posts-header">
                        <h2>Tasting Notes</h2>
                    </div>
                    
                    <div class="posts-grid">
                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">Origin Spotlight</span>
                                <h3>Ethiopian Naturals</h3>
                                <p>Why natural processed Ethiopian coffees are having a moment right now...</p>
                                <span class="post-date">Jan 15, 2025</span>
                            </div>
                        </article>

                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">Brew Guide</span>
                                <h3>Dialing In Light Roasts</h3>
                                <p>Tips for getting the most out of your light roast single origins...</p>
                                <span class="post-date">Jan 10, 2025</span>
                            </div>
                        </article>

                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">Producer Visit</span>
                                <h3>Finca El Injerto</h3>
                                <p>Notes from visiting one of Guatemala's most celebrated farms...</p>
                                <span class="post-date">Jan 5, 2025</span>
                            </div>
                        </article>

                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">What We're Drinking</span>
                                <h3>January Rotation</h3>
                                <p>The beans that have been in heavy rotation this month...</p>
                                <span class="post-date">Jan 2, 2025</span>
                            </div>
                        </article>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <img src="lockup_light.png" alt="Guapa" class="footer-logo">
                    <p>A creative collective for friends who make things.</p>
                </div>
                <div class="footer-links">
                    <h4>Shop</h4>
                    <a href="#">All Products</a>
                    <a href="#">Photography</a>
                </div>
                <div class="footer-links">
                    <h4>Info</h4>
                    <a href="#">About</a>
                    <a href="#">Contact</a>
                </div>
                <div class="footer-links">
                    <h4>Follow</h4>
                    <a href="https://instagram.com/guapa_skate" target="_blank" rel="noopener">Instagram</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© 2025 Guapa Collective</p>
            </div>
        </div>
    </footer>

    <script>
        // Coffee Data
        const regions = [
            {
                id: 'africa',
                name: 'AFRICA',
                desc: 'The birthplace of coffee',
                icon: 'üåç',
                color: '#f0c014',
                countries: {
                    ethiopia: {
                        name: 'Ethiopia',
                        icon: 'üá™üáπ',
                        producers: [
                            { 
                                name: 'Yirgacheffe Cooperatives', 
                                icon: 'ü´ê', 
                                desc: 'Birthplace of coffee. Bright, floral, blueberry notes.',
                                roasts: [
                                    { name: 'Kochere Natural', notes: 'Blueberry, jasmine, wine' },
                                    { name: 'Gedeb Washed', notes: 'Bergamot, peach, tea-like' },
                                    { name: 'Aricha Honey', notes: 'Strawberry, honey, floral' }
                                ]
                            },
                            { 
                                name: 'Sidamo Region', 
                                icon: 'üçã', 
                                desc: 'Complex citrus and stone fruit. Balanced with sweet finish.',
                                roasts: [
                                    { name: 'Bensa Natural', notes: 'Tropical fruit, citrus, cocoa' },
                                    { name: 'Shantawene Washed', notes: 'Lemon, apricot, black tea' }
                                ]
                            },
                            { 
                                name: 'Guji Zone', 
                                icon: 'üçë', 
                                desc: 'Intense fruit-forward naturals. Rising star.',
                                roasts: [
                                    { name: 'Hambela Natural', notes: 'Peach, mango, fermented fruit' },
                                    { name: 'Uraga Washed', notes: 'Floral, citrus, clean' }
                                ]
                            }
                        ]
                    },
                    kenya: {
                        name: 'Kenya',
                        icon: 'üá∞üá™',
                        producers: [
                            { 
                                name: 'Nyeri County', 
                                icon: 'üçá', 
                                desc: 'SL-28 and SL-34 varietals. Intense blackcurrant acidity.',
                                roasts: [
                                    { name: 'Othaya AA', notes: 'Blackcurrant, grapefruit, brown sugar' },
                                    { name: 'Karatina Peaberry', notes: 'Raspberry, lime, molasses' }
                                ]
                            },
                            { 
                                name: 'Kirinyaga County', 
                                icon: 'ü´í', 
                                desc: 'Mount Kenya slopes. Bright, complex, wine-like.',
                                roasts: [
                                    { name: 'Kamwangi AB', notes: 'Plum, orange, black tea' }
                                ]
                            }
                        ]
                    },
                    rwanda: {
                        name: 'Rwanda',
                        icon: 'üá∑üáº',
                        producers: [
                            { 
                                name: 'Huye Mountain', 
                                icon: 'üçä', 
                                desc: 'High altitude, exceptional clarity. Orange and floral.',
                                roasts: [
                                    { name: 'Red Bourbon Washed', notes: 'Orange blossom, caramel, silky' }
                                ]
                            },
                            { 
                                name: 'Buf Coffee', 
                                icon: 'üçØ', 
                                desc: 'Women-owned washing station. Meticulous processing.',
                                roasts: [
                                    { name: 'Buf Fully Washed', notes: 'Honey, lemon, brown sugar' }
                                ]
                            }
                        ]
                    },
                    burundi: {
                        name: 'Burundi',
                        icon: 'üáßüáÆ',
                        producers: [
                            { 
                                name: 'Kayanza Province', 
                                icon: 'üçè', 
                                desc: 'Similar terroir to Rwanda. Sweet, balanced, underrated.',
                                roasts: [
                                    { name: 'Long Miles Coffee', notes: 'Green apple, caramel, juicy' }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                id: 'central_america',
                name: 'CENTRAL AMERICA',
                desc: 'Volcanic highlands & honey processes',
                icon: 'üåé',
                color: '#e8a0b0',
                countries: {
                    guatemala: {
                        name: 'Guatemala',
                        icon: 'üá¨üáπ',
                        producers: [
                            { 
                                name: 'Huehuetenango', 
                                icon: 'üç´', 
                                desc: 'Remote highlands. Complex, fruity, chocolate undertones.',
                                roasts: [
                                    { name: 'El Injerto Bourbon', notes: 'Chocolate, orange, toffee' },
                                    { name: 'La Libertad Pacamara', notes: 'Floral, citrus, creamy' }
                                ]
                            },
                            { 
                                name: 'Antigua Valley', 
                                icon: 'üåã', 
                                desc: 'Volcanic soil. Spicy, smoky, full-bodied.',
                                roasts: [
                                    { name: 'Finca Filadelfia', notes: 'Cocoa, spice, brown sugar' }
                                ]
                            }
                        ]
                    },
                    costa_rica: {
                        name: 'Costa Rica',
                        icon: 'üá®üá∑',
                        producers: [
                            { 
                                name: 'Tarraz√∫', 
                                icon: 'üçé', 
                                desc: 'Most famous region. Bright, clean, apple-like.',
                                roasts: [
                                    { name: 'La Minita', notes: 'Apple, honey, citrus' },
                                    { name: 'Herbaz√∫ Black Honey', notes: 'Stone fruit, molasses, complex' }
                                ]
                            },
                            { 
                                name: 'West Valley', 
                                icon: 'ü•≠', 
                                desc: 'Experimental processing. Innovative honeys and naturals.',
                                roasts: [
                                    { name: 'Finca Sumava', notes: 'Mango, papaya, brown sugar' }
                                ]
                            }
                        ]
                    },
                    panama: {
                        name: 'Panama',
                        icon: 'üáµüá¶',
                        producers: [
                            { 
                                name: 'Boquete Highlands', 
                                icon: 'üå∏', 
                                desc: 'Home of legendary Gesha. Floral, tea-like, expensive.',
                                roasts: [
                                    { name: 'Hacienda La Esmeralda Gesha', notes: 'Jasmine, bergamot, honey' },
                                    { name: 'Finca Deborah Gesha', notes: 'Rose, lychee, tropical' }
                                ]
                            }
                        ]
                    },
                    honduras: {
                        name: 'Honduras',
                        icon: 'üá≠üá≥',
                        producers: [
                            { 
                                name: 'Cop√°n Region', 
                                icon: 'üç¨', 
                                desc: 'Improving quality rapidly. Sweet, balanced, great value.',
                                roasts: [
                                    { name: 'Finca El Puente', notes: 'Caramel, red apple, clean' }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                id: 'south_america',
                name: 'SOUTH AMERICA',
                desc: 'The world\'s largest producers',
                icon: 'üåé',
                color: '#d88a9a',
                countries: {
                    colombia: {
                        name: 'Colombia',
                        icon: 'üá®üá¥',
                        producers: [
                            { 
                                name: 'Huila Department', 
                                icon: 'üçí', 
                                desc: 'Colombia\'s specialty heartland. Caramel, cherry, balanced.',
                                roasts: [
                                    { name: 'La Plata Pink Bourbon', notes: 'Cherry, florals, wine' },
                                    { name: 'Pitalito Caturra', notes: 'Caramel, citrus, nutty' }
                                ]
                            },
                            { 
                                name: 'Nari√±o', 
                                icon: 'üçã', 
                                desc: 'Extreme altitude near Ecuador. Bright, complex acidity.',
                                roasts: [
                                    { name: 'La Union Washed', notes: 'Lemon, panela, silky' }
                                ]
                            },
                            { 
                                name: 'Tolima', 
                                icon: 'ü•ú', 
                                desc: 'Emerging region. Nutty, chocolate, approachable.',
                                roasts: [
                                    { name: 'Planadas Community Lot', notes: 'Hazelnut, milk chocolate, orange' }
                                ]
                            }
                        ]
                    },
                    brazil: {
                        name: 'Brazil',
                        icon: 'üáßüá∑',
                        producers: [
                            { 
                                name: 'Minas Gerais', 
                                icon: 'ü•ú', 
                                desc: 'World\'s largest producer. Nutty, chocolate, low acidity.',
                                roasts: [
                                    { name: 'Fazenda Sert√£o Natural', notes: 'Peanut, chocolate, smooth' },
                                    { name: 'Daterra Reserve', notes: 'Caramel, nuts, creamy' }
                                ]
                            },
                            { 
                                name: 'Mogiana', 
                                icon: 'üç´', 
                                desc: 'S√£o Paulo state. Specialty micro-lots emerging.',
                                roasts: [
                                    { name: 'Fazenda Ambiental Fortaleza', notes: 'Dark chocolate, cherry, spice' }
                                ]
                            }
                        ]
                    },
                    peru: {
                        name: 'Peru',
                        icon: 'üáµüá™',
                        producers: [
                            { 
                                name: 'Cajamarca', 
                                icon: 'üçØ', 
                                desc: 'Northern highlands. Sweet, mild, increasingly specialty.',
                                roasts: [
                                    { name: 'Cenfrocafe Organic', notes: 'Honey, cocoa, mild fruit' }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                id: 'asia_pacific',
                name: 'ASIA PACIFIC',
                desc: 'Earthy, herbal, unique processes',
                icon: 'üåè',
                color: '#c4848f',
                countries: {
                    indonesia: {
                        name: 'Indonesia',
                        icon: 'üáÆüá©',
                        producers: [
                            { 
                                name: 'Sumatra', 
                                icon: 'üåø', 
                                desc: 'Wet-hulled processing. Earthy, herbal, full body.',
                                roasts: [
                                    { name: 'Gayo Highland Mandheling', notes: 'Earth, herbs, tobacco, heavy' },
                                    { name: 'Lake Toba Triple Pick', notes: 'Cedar, dark chocolate, moss' }
                                ]
                            },
                            { 
                                name: 'Java', 
                                icon: 'üåæ', 
                                desc: 'Historic Dutch estates. Clean, malty, balanced.',
                                roasts: [
                                    { name: 'Java Estate Washed', notes: 'Malt, brown sugar, herbal' }
                                ]
                            },
                            { 
                                name: 'Sulawesi Toraja', 
                                icon: 'üçÇ', 
                                desc: 'Unique microclimate. Spicy, earthy, complex.',
                                roasts: [
                                    { name: 'Toraja Sapan', notes: 'Spice, dark fruit, earthy' }
                                ]
                            }
                        ]
                    },
                    vietnam: {
                        name: 'Vietnam',
                        icon: 'üáªüá≥',
                        producers: [
                            { 
                                name: 'Da Lat Highlands', 
                                icon: 'üå∫', 
                                desc: 'Beyond robusta. Arabica specialty emerging.',
                                roasts: [
                                    { name: 'C·∫ßu ƒê·∫•t Arabica', notes: 'Floral, tea-like, delicate' }
                                ]
                            }
                        ]
                    },
                    png: {
                        name: 'Papua New Guinea',
                        icon: 'üáµüá¨',
                        producers: [
                            { 
                                name: 'Eastern Highlands', 
                                icon: 'üå¥', 
                                desc: 'Wild, funky, unique. Tropical fruit and earth.',
                                roasts: [
                                    { name: 'Kimel Estate', notes: 'Tropical fruit, herbs, brown sugar' }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                id: 'middle_east',
                name: 'MIDDLE EAST',
                desc: 'Ancient origins, rare & wild',
                icon: '‚òï',
                color: '#d4a912',
                countries: {
                    yemen: {
                        name: 'Yemen',
                        icon: 'üáæüá™',
                        producers: [
                            { 
                                name: 'Haraaz Mountains', 
                                icon: 'ü´ê', 
                                desc: 'Ancient terraces. Wild, winey, dried fruit. The OG origin.',
                                roasts: [
                                    { name: 'Haraaz Natural', notes: 'Blueberry, wine, chocolate, wild' },
                                    { name: 'Bani Matar', notes: 'Dried fruit, spice, complex' }
                                ]
                            },
                            { 
                                name: 'Mattari Region', 
                                icon: 'üçá', 
                                desc: 'Historic mocha port coffee. Intense, fruity, rare.',
                                roasts: [
                                    { name: 'Port of Mokha Selection', notes: 'Raisin, cocoa, port wine' }
                                ]
                            }
                        ]
                    }
                }
            }
        ];

        let currentRegionIndex = 0;
        let selectedCountry = null;

        const regionList = document.getElementById('regionList');
        const regionDots = document.getElementById('regionDots');
        const countriesGrid = document.getElementById('countriesGrid');
        const producerPanel = document.getElementById('producerPanel');

        // Initialize sidebar
        function initSidebar() {
            regionList.innerHTML = regions.map((r, i) => `
                <li><a href="#" class="genre-link${i === currentRegionIndex ? ' filter-active' : ''}" data-index="${i}">${r.name.replace('_', ' ')}</a></li>
            `).join('');

            regionList.querySelectorAll('.genre-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const index = parseInt(link.dataset.index);
                    navigateToRegion(index);
                });
            });
        }

        // Initialize dots
        function initDots() {
            regionDots.innerHTML = regions.map((r, i) => `
                <div class="region-dot${i === currentRegionIndex ? ' active' : ''}" data-index="${i}" title="${r.name}"></div>
            `).join('');

            regionDots.querySelectorAll('.region-dot').forEach(dot => {
                dot.addEventListener('click', () => {
                    navigateToRegion(parseInt(dot.dataset.index));
                });
            });
        }

        function navigateToRegion(index) {
            currentRegionIndex = index;
            if (currentRegionIndex < 0) currentRegionIndex = regions.length - 1;
            if (currentRegionIndex >= regions.length) currentRegionIndex = 0;
            
            selectedCountry = null;
            closeProducerPanel();
            updateDisplay();
        }

        function updateDisplay() {
            const region = regions[currentRegionIndex];
            
            // Update header
            document.getElementById('regionName').textContent = region.name;
            document.getElementById('regionName').style.color = '';
            document.getElementById('regionDesc').textContent = region.desc;

            // Update sidebar
            regionList.querySelectorAll('.genre-link').forEach((link, i) => {
                link.classList.toggle('filter-active', i === currentRegionIndex);
            });

            // Update dots
            regionDots.querySelectorAll('.region-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === currentRegionIndex);
                dot.style.background = '';
            });

            // Update map
            document.querySelectorAll('.map-region').forEach(path => {
                path.classList.remove('highlight');
                if (path.dataset.region === region.id) {
                    path.classList.add('highlight');
                }
            });

            document.querySelectorAll('.map-label').forEach(label => {
                label.classList.remove('highlight');
                if (label.dataset.region === region.id) {
                    label.classList.add('highlight');
                }
            });

            // Update countries grid
            countriesGrid.innerHTML = Object.entries(region.countries).map(([id, country]) => `
                <div class="country-chip${selectedCountry === id ? ' active' : ''}" data-country="${id}">
                    <span class="flag">${country.icon}</span>
                    <span class="name">${country.name}</span>
                </div>
            `).join('');

            countriesGrid.querySelectorAll('.country-chip').forEach(chip => {
                chip.addEventListener('click', () => {
                    const countryId = chip.dataset.country;
                    if (selectedCountry === countryId) {
                        selectedCountry = null;
                        closeProducerPanel();
                    } else {
                        selectedCountry = countryId;
                        showProducerPanel(countryId);
                    }
                    updateDisplay();
                });
            });
        }

        function showProducerPanel(countryId) {
            const region = regions[currentRegionIndex];
            const country = region.countries[countryId];

            document.getElementById('countryIcon').textContent = country.icon;
            document.getElementById('countryName').textContent = country.name.toUpperCase();
            document.getElementById('countryName').style.color = '';
            document.getElementById('countryRegion').textContent = region.name;
            producerPanel.style.borderColor = '';

            const producerGrid = document.getElementById('producerGrid');
            producerGrid.innerHTML = country.producers.map(producer => `
                <div class="producer-card">
                    <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px;">
                        <span style="font-size: 1.5rem;">${producer.icon}</span>
                        <div>
                            <h4 style="margin: 0; font-size: 0.95rem; color: var(--yellow);">${producer.name}</h4>
                            <p style="margin: 4px 0 0 0; font-size: 0.75rem; color: var(--gray-400); line-height: 1.4;">${producer.desc}</p>
                        </div>
                    </div>
                    <div class="roasts-list">
                        ${producer.roasts.map((roast, i) => `
                            <div style="padding: 8px 0; ${i < producer.roasts.length - 1 ? 'border-bottom: 1px solid var(--gray-800);' : ''}">
                                <div style="font-size: 0.85rem; color: var(--gray-300); margin-bottom: 3px;">${roast.name}</div>
                                <div style="font-size: 0.7rem; color: var(--gray-600); margin-bottom: 8px; font-style: italic;">${roast.notes}</div>
                                <div class="roast-links">
                                    <a href="#" class="roast-link roaster">ROASTER</a>
                                    <a href="#" class="roast-link info">INFO</a>
                                    <a href="#" class="roast-link buy">BUY BEANS</a>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            producerPanel.classList.add('visible');
        }

        function closeProducerPanel() {
            producerPanel.classList.remove('visible');
            selectedCountry = null;
        }

        // Arrow button handlers
        document.getElementById('prevRegion').addEventListener('click', () => {
            navigateToRegion(currentRegionIndex - 1);
        });

        document.getElementById('nextRegion').addEventListener('click', () => {
            navigateToRegion(currentRegionIndex + 1);
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                navigateToRegion(currentRegionIndex - 1);
            } else if (e.key === 'ArrowRight') {
                navigateToRegion(currentRegionIndex + 1);
            } else if (e.key === 'Escape') {
                closeProducerPanel();
                updateDisplay();
            }
        });

        // Map region clicks
        document.querySelectorAll('.map-region').forEach(path => {
            path.addEventListener('click', () => {
                const regionId = path.dataset.region;
                const index = regions.findIndex(r => r.id === regionId);
                if (index !== -1) {
                    navigateToRegion(index);
                }
            });
        });

        // Mobile nav toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');
        navToggle.addEventListener('click', () => {
            navLinks.classList.toggle('nav-links--open');
            navToggle.classList.toggle('nav-toggle--open');
        });

        // Initialize
        initSidebar();
        initDots();
        updateDisplay();
    </script>
</body>
</html>

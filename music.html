<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music | Guapa</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="music.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Newsreader:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    <style>
        /* Music Journey Styles */
        .journey-section {
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-lg);
            border-bottom: 1px solid var(--gray-800);
        }

        .journey-header {
            display: flex;
            align-items: flex-end;
            gap: 24px;
            margin-bottom: 8px;
        }

        .year-display h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--yellow);
            letter-spacing: -0.02em;
            line-height: 1;
            min-width: 80px;
        }

        .album-bars {
            flex: 1;
            display: flex;
            align-items: flex-end;
            gap: 3px;
            height: 50px;
        }

        .album-bar {
            flex: 1;
            background: var(--pink);
            opacity: 0.3;
            border-radius: 2px 2px 0 0;
            transition: all 0.2s;
            min-height: 4px;
            cursor: pointer;
        }

        .album-bar.active {
            opacity: 1;
            background: var(--yellow);
        }

        .album-bar:hover {
            opacity: 0.7;
        }

        .slider-row {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 20px;
        }

        .slider-spacer {
            min-width: 80px;
        }

        .slider-wrapper {
            flex: 1;
        }

        .year-slider {
            width: 100%;
            -webkit-appearance: none;
            height: 3px;
            background: var(--gray-800);
            outline: none;
            border-radius: 2px;
        }

        .year-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: var(--yellow);
            cursor: pointer;
            border-radius: 2px;
        }

        .year-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            background: var(--yellow);
            cursor: pointer;
            border: none;
            border-radius: 2px;
        }

        .timeline-markers {
            display: flex;
            justify-content: space-between;
            margin-top: 6px;
        }

        .timeline-markers span {
            font-size: 0.7rem;
            color: var(--gray-600);
        }

        .genre-groups {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .genre-group {
            display: flex;
            align-items: stretch;
            gap: 10px;
        }

        .genre-group.hidden {
            display: none;
        }

        .genre-bracket {
            width: 28px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .bracket-line {
            width: 2px;
            flex: 1;
            background: var(--gray-800);
            border-radius: 1px;
        }

        .bracket-icon {
            font-size: 1.1rem;
            padding: 6px 0;
        }

        .genre-label {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            font-size: 0.6rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--gray-600);
            padding: 6px 0;
        }

        .subgenres-grid {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-content: flex-start;
        }

        .subgenre-item {
            background: transparent;
            border: 2px solid var(--gray-800);
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
            transition: all 0.2s;
            padding: 10px 12px;
        }

        .subgenre-header {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .subgenre-item:hover {
            border-color: var(--pink);
            background: rgba(232, 160, 176, 0.05);
        }

        .subgenre-item.active {
            border-color: var(--pink);
            background: rgba(232, 160, 176, 0.1);
        }

        .subgenre-item.rising { border-color: var(--blue, #88a8d4); }
        .subgenre-item.peak { border-color: var(--pink); }
        .subgenre-item.fading { border-color: var(--gray-800); opacity: 0.5; }
        .subgenre-item.emerging { border-color: var(--yellow); border-style: dashed; }

        .subgenre-item .icon {
            font-size: 1rem;
        }

        .subgenre-item .name {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-400);
        }

        .subgenre-item.rising .name { color: var(--blue, #88a8d4); }
        .subgenre-item.peak .name { color: var(--pink); }
        .subgenre-item.emerging .name { color: var(--yellow); }

        .artist-list {
            font-size: 0.65rem;
            color: var(--gray-600);
            padding-left: 2px;
            line-height: 1.5;
            display: flex;
            flex-direction: column;
            gap: 1px;
        }

        .artist-list span::before {
            content: "â€¢ ";
        }

        /* Artist Panel */
        .artist-panel {
            display: none;
            background: var(--gray-900);
            border: 2px solid var(--pink);
            border-radius: 8px;
            padding: 24px;
            margin-top: 20px;
            position: relative;
        }

        .artist-panel.visible {
            display: block;
        }

        .artist-panel-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 14px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-800);
        }

        .artist-panel-header .icon {
            font-size: 2rem;
        }

        .artist-panel-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--yellow);
        }

        .artist-panel-header .subgenre-tag {
            font-size: 0.75rem;
            color: var(--blue, #88a8d4);
            margin-top: 2px;
        }

        .album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 14px;
        }

        .album-card {
            background: transparent;
            border: 1px solid var(--gray-800);
            border-radius: 6px;
            padding: 16px 16px 20px 16px;
            transition: all 0.2s;
        }

        .album-card:hover {
            border-color: var(--pink);
        }

        .album-links {
            display: flex;
            gap: 6px;
            flex-wrap: nowrap;
        }

        .album-link {
            font-size: 0.6rem;
            font-weight: 600;
            padding: 5px 7px;
            background: transparent;
            border: 1px solid;
            border-radius: 3px;
            text-decoration: none;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            white-space: nowrap;
        }

        .album-link.spotify {
            color: #1db954;
            border-color: #1db954;
        }

        .album-link.wiki {
            color: var(--blue, #88a8d4);
            border-color: var(--blue, #88a8d4);
        }

        .album-link.buy {
            color: var(--yellow);
            border-color: var(--yellow);
        }

        .album-link:hover {
            background: currentColor;
            color: var(--black);
        }

        .close-panel {
            position: absolute;
            top: 12px;
            right: 12px;
            background: transparent;
            border: 1px solid var(--gray-800);
            border-radius: 4px;
            color: var(--gray-600);
            width: 28px;
            height: 28px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-panel:hover {
            border-color: var(--pink);
            color: var(--pink);
        }

        /* Decade nav */
        .decade-nav {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .decade-btn {
            background: transparent;
            color: var(--gray-600);
            border: 1px solid var(--gray-800);
            border-radius: 4px;
            padding: 6px 12px;
            font-family: var(--font-main);
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .decade-btn:hover {
            color: var(--yellow);
            border-color: var(--yellow);
        }

        .decade-btn.active {
            background: var(--yellow);
            color: var(--black);
            border-color: var(--yellow);
        }

        .decade-btn.locked {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Active genre highlight in sidebar */
        .genre-link.filter-active {
            color: var(--yellow) !important;
            background: rgba(240, 192, 20, 0.1);
        }

        .genre-link.filter-active::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 4px;
            background: var(--yellow);
            border-radius: 50%;
            margin-right: var(--space-xs);
            vertical-align: middle;
        }

        /* Search */
        .search-container {
            position: relative;
            width: 240px;
            flex-shrink: 0;
        }

        .search-input {
            width: 100%;
            padding: 8px 12px;
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-sm);
            color: var(--white);
            font-family: var(--font-main);
            font-size: 0.85rem;
            outline: none;
            transition: border-color 0.2s;
        }

        .search-input::placeholder { color: var(--gray-600); }
        .search-input:focus { border-color: var(--yellow); }

        .search-results {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-top: none;
            border-radius: 0 0 var(--radius-sm) var(--radius-sm);
            max-height: 260px;
            overflow-y: auto;
            z-index: 100;
        }

        .search-results.open { display: block; }

        .search-result-item {
            padding: 8px 12px;
            cursor: pointer;
            transition: background 0.15s;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid var(--gray-800);
        }

        .search-result-item:last-child { border-bottom: none; }
        .search-result-item:hover { background: var(--gray-800); }

        .search-result-item .result-icon { font-size: 1rem; }
        .search-result-item .result-name { font-size: 0.8rem; color: var(--white); font-weight: 500; }
        .search-result-item .result-meta { font-size: 0.65rem; color: var(--gray-600); margin-left: auto; white-space: nowrap; }

        @media (max-width: 768px) {
            .search-container { width: 100%; }
        }

        /* Rankings Section */
        .rankings-section {
            margin-top: var(--space-lg);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--gray-800);
        }

        .rankings-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-md);
            flex-wrap: wrap;
            gap: 12px;
        }

        .rankings-title {
            display: flex;
            align-items: baseline;
            gap: 12px;
        }

        .rankings-title h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--white);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .rankings-title .year-tag {
            font-size: 0.75rem;
            color: var(--yellow);
            font-weight: 500;
        }

        .rankings-count {
            font-size: 0.75rem;
            color: var(--gray-600);
        }

        .clear-year-btn {
            display: none;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: var(--gray-800);
            border: 1px solid var(--gray-700);
            border-radius: var(--radius-sm);
            color: var(--gray-400);
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .clear-year-btn.visible { display: flex; }
        .clear-year-btn:hover { background: var(--gray-700); color: var(--white); }

        .rankings-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-md);
            background: var(--gray-900);
        }

        .ranking-row {
            display: grid;
            grid-template-columns: 50px 1fr 100px 40px;
            align-items: center;
            padding: 10px 16px;
            border-bottom: 1px solid var(--gray-800);
            cursor: pointer;
            transition: background 0.15s;
        }

        .ranking-row:last-child { border-bottom: none; }
        .ranking-row:hover { background: var(--gray-800); }

        .ranking-rank {
            font-size: 0.8rem;
            color: var(--gray-500);
            font-weight: 600;
        }

        .ranking-rank.top-3 { color: var(--yellow); }

        .ranking-name {
            font-size: 0.85rem;
            color: var(--white);
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .ranking-bar-container {
            height: 6px;
            background: var(--gray-800);
            border-radius: 3px;
            overflow: hidden;
        }

        .ranking-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--pink), var(--yellow));
            border-radius: 3px;
        }

        .ranking-score {
            font-size: 0.75rem;
            color: var(--gray-500);
            text-align: right;
            font-weight: 500;
        }

        /* Artist Popup */
        .artist-popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .artist-popup-overlay.open { display: flex; }

        .artist-popup {
            background: var(--gray-900);
            border: 1px solid var(--gray-700);
            border-radius: var(--radius-lg);
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .artist-popup-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid var(--gray-800);
        }

        .artist-popup-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: var(--gray-500);
            font-size: 1.2rem;
            cursor: pointer;
        }

        .artist-popup-close:hover { color: var(--white); }

        .artist-popup-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 8px;
        }

        .artist-popup-meta {
            display: flex;
            gap: 16px;
            font-size: 0.8rem;
            color: var(--gray-500);
        }

        .artist-popup-meta .rank { color: var(--yellow); font-weight: 600; }

        .artist-popup-albums {
            padding: 20px 24px 24px;
        }

        .artist-popup-albums h4 {
            font-size: 0.7rem;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 16px;
        }

        .popup-album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 12px;
        }

        .popup-album { text-align: center; }

        .popup-album-art {
            width: 100%;
            aspect-ratio: 1;
            background: var(--gray-800);
            border-radius: var(--radius-sm);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .popup-album-title {
            font-size: 0.65rem;
            color: var(--white);
            font-weight: 500;
            line-height: 1.3;
        }

        .popup-album-year {
            font-size: 0.6rem;
            color: var(--gray-600);
        }

        .no-rankings {
            padding: 30px 20px;
            text-align: center;
            color: var(--gray-600);
            font-size: 0.85rem;
        }

        @media (max-width: 768px) {
            .ranking-row { grid-template-columns: 40px 1fr 70px 35px; padding: 8px 12px; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <a href="index.html" class="nav-logo">
            <img src="guapa_logo_dark.png" alt="Guapa" class="logo-img">
            <span class="logo-text" style="font-size: 1.8rem;">GUAPA <span style="font-size: 0.6rem; font-weight: 400; vertical-align: middle;">inc</span></span>
        </a>
        
        <div class="nav-links">
            <a href="music.html">Music</a>
            <a href="coffee.html">Coffee</a>
            <a href="index.html#shop">Data</a>
            <a href="index.html#shop">Photography</a>
            <a href="index.html#about">About</a>
        </div>

        <div class="nav-actions">
            <a href="https://instagram.com/guapa_skate" target="_blank" rel="noopener" class="nav-social">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
            </a>
            <a href="shop.html" class="nav-cart">Shop â†’</a>
        </div>

        <button class="nav-toggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
        </button>
    </nav>

    <main class="music-page">
        <!-- Page Header -->
        <header class="music-header">
            <div class="music-header-text">
                <h1>Music</h1>
                <p>What we're listening to, watching, and vibing with</p>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Search artists..." autocomplete="off">
                <div class="search-results" id="searchResults"></div>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="music-layout">
            <!-- Sidebar -->
            <aside class="music-sidebar">
                <div class="sidebar-section">
                    <h3>Genres</h3>
                    <ul class="genre-list">
                        <li><a href="#" class="genre-link filter-active" data-filter="all">All</a></li>
                        <li><a href="#" class="genre-link" data-filter="pop">Pop</a></li>
                        <li><a href="#" class="genre-link" data-filter="rock">Rock</a></li>
                        <li><a href="#" class="genre-link" data-filter="soul">Soul / R&B</a></li>
                        <li><a href="#" class="genre-link" data-filter="hiphop">Hip Hop</a></li>
                        <li><a href="#" class="genre-link" data-filter="electronic">Electronic</a></li>
                        <li><a href="#" class="genre-link" data-filter="country">Country</a></li>
                        <li><a href="#" class="genre-link" data-filter="folk">Folk</a></li>
                        <li><a href="#" class="genre-link" data-filter="jazz">Jazz</a></li>
                        <li><a href="#" class="genre-link" data-filter="blues">Blues</a></li>
                    </ul>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="music-main">
                <!-- Music Journey Section -->
                <section class="journey-section">
                    <nav class="decade-nav">
                        <button class="decade-btn" data-year="1960">60s</button>
                        <button class="decade-btn" data-year="1970">70s</button>
                        <button class="decade-btn" data-year="1980">80s</button>
                        <button class="decade-btn" data-year="1990">90s</button>
                        <button class="decade-btn" data-year="2000">00s</button>
                        <button class="decade-btn" data-year="2010">10s</button>
                        <button class="decade-btn" data-year="2020">20s</button>
                    </nav>

                    <div class="journey-header">
                        <div class="year-display">
                            <h2 id="currentYear">1960</h2>
                        </div>
                        <div class="album-bars" id="albumBars"></div>
                    </div>

                    <div class="slider-row">
                        <div class="slider-spacer"></div>
                        <div class="slider-wrapper">
                            <input type="range" class="year-slider" id="yearSlider" min="1960" max="2025" value="1960">
                            <div class="timeline-markers" id="timelineMarkers">
                                <span>1960</span>
                                <span>1980</span>
                                <span>2000</span>
                                <span>2025</span>
                            </div>
                        </div>
                    </div>

                    <div class="genre-groups" id="genreGroups"></div>

                    <div class="artist-panel" id="artistPanel">
                        <button class="close-panel" onclick="closeArtistPanel()">âœ•</button>
                        <div class="artist-panel-header">
                            <span class="icon" id="artistIcon">ðŸŽ¸</span>
                            <div>
                                <h3 id="artistName">SUBGENRE NAME</h3>
                                <p class="subgenre-tag" id="artistSubgenre">GENRE</p>
                            </div>
                        </div>
                        <div class="album-grid" id="albumGrid"></div>
                    </div>

                    <!-- Rankings Section -->
                    <div class="rankings-section" id="rankingsSection">
                        <div class="rankings-header">
                            <div class="rankings-title">
                                <h3 id="rankingsGenre">ALL GENRES</h3>
                                <span class="year-tag" id="rankingsYearTag"></span>
                            </div>
                            <button class="clear-year-btn" id="clearYearBtn">
                                Clear <span id="clearYearLabel">1960</span> âœ•
                            </button>
                            <span class="rankings-count" id="rankingsCount">0 artists</span>
                        </div>
                        <div class="rankings-list" id="rankingsList">
                            <div class="no-rankings">Loading rankings...</div>
                        </div>
                    </div>
                </section>

                <!-- Posts / Reviews Section -->
                <section class="music-posts">
                    <div class="posts-header">
                        <h2>Recent Posts</h2>
                    </div>
                    
                    <div class="posts-grid">
                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">Album Review</span>
                                <h3>Album Title Goes Here</h3>
                                <p>A short description or excerpt from the review. What made this album worth talking about...</p>
                                <span class="post-date">Jan 10, 2025</span>
                            </div>
                        </article>

                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">Discovery</span>
                                <h3>New Artist We're Into</h3>
                                <p>Found this one digging through crates. Here's why you should check them out...</p>
                                <span class="post-date">Jan 8, 2025</span>
                            </div>
                        </article>

                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">Playlist</span>
                                <h3>January Rotation</h3>
                                <p>What's been on repeat this month. A mix of old favorites and new finds...</p>
                                <span class="post-date">Jan 5, 2025</span>
                            </div>
                        </article>

                        <article class="post-card">
                            <div class="post-image">
                                <div class="post-placeholder"></div>
                            </div>
                            <div class="post-content">
                                <span class="post-tag">Live</span>
                                <h3>Show Recap</h3>
                                <p>Caught a great show last week. Here's what went down...</p>
                                <span class="post-date">Jan 2, 2025</span>
                            </div>
                        </article>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Artist Popup Overlay -->
    <div class="artist-popup-overlay" id="artistPopupOverlay">
        <div class="artist-popup">
            <button class="artist-popup-close" id="popupClose">âœ•</button>
            <div class="artist-popup-header">
                <h2 class="artist-popup-name" id="popupArtistName">Artist Name</h2>
                <div class="artist-popup-meta">
                    <span class="rank" id="popupArtistRank">#1 in Rock</span>
                    <span id="popupArtistScore">Score: 98</span>
                    <span id="popupArtistYears">1960â€“1970</span>
                </div>
            </div>
            <div class="artist-popup-albums">
                <h4>Albums</h4>
                <div class="popup-album-grid" id="popupAlbumGrid"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <img src="lockup_light.png" alt="Guapa" class="footer-logo">
                    <p>A creative collective for friends who make things.</p>
                </div>
                <div class="footer-links">
                    <h4>Shop</h4>
                    <a href="#">All Products</a>
                    <a href="#">Photography</a>
                </div>
                <div class="footer-links">
                    <h4>Info</h4>
                    <a href="#">About</a>
                    <a href="#">Contact</a>
                </div>
                <div class="footer-links">
                    <h4>Follow</h4>
                    <a href="https://instagram.com/guapa_skate" target="_blank" rel="noopener">Instagram</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Â© 2025 Guapa Collective</p>
            </div>
        </div>
    </footer>

    <script>
        const MIN_YEAR = 1960;
        const MAX_YEAR = 2025;

        // Helper: generate status object from ranges
        function S(ranges) {
            const s = {};
            for (let y = MIN_YEAR; y <= MAX_YEAR; y++) s[y] = 'hidden';
            ranges.forEach(([start, end, status]) => {
                for (let y = start; y <= end; y++) s[y] = status;
            });
            return s;
        }

        const musicData = {
            pop: {
                name: "POP", icon: "ðŸŽ€",
                status: S([[1960, 2025, 'peak']]),
                subgenres: {
                    teen_pop_60s: { name: "TEEN POP", icon: "ðŸ’–",
                        status: S([[1960, 1963, 'peak'], [1964, 1966, 'fading']]),
                        artists: {
                            ronettes: { name: "The Ronettes", icon: "ðŸ’„", description: "Be My Baby. Phil Spector's wall of sound, Ronnie's voice on top.", albums: [{ title: "Presenting the Fabulous Ronettes", year: 1964 }] },
                            lesley_gore: { name: "Lesley Gore", icon: "ðŸŽ‚", description: "It's My Party. Teen pop with backbone.", albums: [{ title: "I'll Cry If I Want To", year: 1963 }] }
                        }
                    },
                    bubblegum: { name: "BUBBLEGUM", icon: "ðŸ«§",
                        status: S([[1966, 1967, 'emerging'], [1968, 1969, 'peak'], [1970, 1972, 'fading']]),
                        artists: {
                            archies: { name: "The Archies", icon: "ðŸŽª", description: "Sugar Sugar. A cartoon band that outsold the Beatles in 1969.", albums: [{ title: "Everything's Archie", year: 1969 }] },
                            monkees: { name: "The Monkees", icon: "ðŸ’", description: "Manufactured for TV, became real. Hey Hey.", albums: [{ title: "The Monkees", year: 1966 }, { title: "Headquarters", year: 1967 }] }
                        }
                    },
                    glam_pop: { name: "GLAM", icon: "âœ¨",
                        status: S([[1970, 1971, 'emerging'], [1972, 1974, 'peak'], [1975, 1977, 'fading']]),
                        artists: {
                            bowie: { name: "David Bowie", icon: "âš¡", description: "Ziggy Stardust. Chameleon. Alien. The most important artist of the 70s.", albums: [{ title: "Hunky Dory", year: 1971 }, { title: "Ziggy Stardust", year: 1972 }, { title: "Aladdin Sane", year: 1973 }, { title: "Low", year: 1977 }] },
                            t_rex: { name: "T. Rex", icon: "ðŸ¦–", description: "Marc Bolan. Electric Warrior. Invented glam rock over a weekend.", albums: [{ title: "Electric Warrior", year: 1971 }, { title: "The Slider", year: 1972 }] },
                            elton: { name: "Elton John", icon: "ðŸŽ¹", description: "Tiny Dancer. Rocket Man. Spectacles and sequins over pure songcraft.", albums: [{ title: "Goodbye Yellow Brick Road", year: 1973 }, { title: "Captain Fantastic", year: 1975 }] }
                        }
                    },
                    synth_pop: { name: "SYNTH POP", icon: "ðŸ”®",
                        status: S([[1978, 1979, 'emerging'], [1980, 1982, 'rising'], [1983, 1986, 'peak'], [1987, 1990, 'fading']]),
                        artists: {
                            depeche: { name: "Depeche Mode", icon: "â¬›", description: "Basildon boys who made darkness danceable. Never stopped.", albums: [{ title: "Speak & Spell", year: 1981 }, { title: "Violator", year: 1990 }] },
                            new_order: { name: "New Order", icon: "ðŸ’ ", description: "From the ashes of Joy Division. Blue Monday changed everything.", albums: [{ title: "Power, Corruption & Lies", year: 1983 }, { title: "Technique", year: 1989 }] },
                            tears: { name: "Tears for Fears", icon: "ðŸŒ", description: "Everybody Wants to Rule the World. Ambition as pop.", albums: [{ title: "Songs from the Big Chair", year: 1985 }] }
                        }
                    },
                    mtv_pop: { name: "MTV POP", icon: "ðŸ“º",
                        status: S([[1981, 1982, 'emerging'], [1983, 1988, 'peak'], [1989, 1992, 'fading']]),
                        artists: {
                            mj: { name: "Michael Jackson", icon: "ðŸŒŸ", description: "The King of Pop. Thriller. Moonwalk. Changed music, dance, video, everything.", albums: [{ title: "Off the Wall", year: 1979 }, { title: "Thriller", year: 1982 }, { title: "Bad", year: 1987 }] },
                            madonna: { name: "Madonna", icon: "ðŸ‘¸", description: "Material Girl to icon. Reinvented herself every era.", albums: [{ title: "Like a Virgin", year: 1984 }, { title: "True Blue", year: 1986 }, { title: "Ray of Light", year: 1998 }] },
                            prince: { name: "Prince", icon: "ðŸ’œ", description: "Purple Rain. Genius. Played every instrument. Danced harder than anyone.", albums: [{ title: "1999", year: 1982 }, { title: "Purple Rain", year: 1984 }, { title: "Sign o' the Times", year: 1987 }] }
                        }
                    },
                    boy_bands: { name: "BOY BANDS / TEEN POP", icon: "ðŸ’…",
                        status: S([[1996, 1997, 'rising'], [1998, 2001, 'peak'], [2002, 2004, 'fading']]),
                        artists: {
                            nsync: { name: "*NSYNC", icon: "â­", description: "Bye Bye Bye. JT origin story. Pop perfection.", albums: [{ title: "*NSYNC", year: 1998 }, { title: "No Strings Attached", year: 2000 }] },
                            backstreet: { name: "Backstreet Boys", icon: "ðŸ–¤", description: "I Want It That Way. Sold 100 million records.", albums: [{ title: "Millennium", year: 1999 }] },
                            spice_girls: { name: "Spice Girls", icon: "ðŸŒ¶ï¸", description: "Girl Power. Wannabe. Five personalities, one cultural earthquake.", albums: [{ title: "Spice", year: 1996 }] }
                        }
                    },
                    modern_pop: { name: "STREAMING POP", icon: "ðŸ“±",
                        status: S([[2008, 2011, 'emerging'], [2012, 2015, 'rising'], [2016, 2025, 'peak']]),
                        artists: {
                            taylor: { name: "Taylor Swift", icon: "ðŸ", description: "Country kid turned pop titan turned indie. Eras Tour broke records.", albums: [{ title: "1989", year: 2014 }, { title: "folklore", year: 2020 }, { title: "Midnights", year: 2022 }] },
                            billie: { name: "Billie Eilish", icon: "ðŸ•·ï¸", description: "Bedroom pop to global domination. Whispered a generation into existence.", albums: [{ title: "When We All Fall Asleep...", year: 2019 }, { title: "Happier Than Ever", year: 2021 }] },
                            weeknd: { name: "The Weeknd", icon: "ðŸŒ™", description: "Abel Tesfaye. Dark R&B turned stadium pop. Blinding Lights.", albums: [{ title: "Trilogy", year: 2012 }, { title: "After Hours", year: 2020 }] }
                        }
                    }
                }
            },
            rock: {
                name: "ROCK", icon: "ðŸŽ¸",
                status: S([[1960, 2025, 'peak']]),
                subgenres: {
                    rock_and_roll: { name: "ROCK & ROLL", icon: "ðŸŽ¹",
                        status: S([[1960, 1961, 'peak'], [1962, 1969, 'fading']]),
                        artists: {
                            elvis: { name: "Elvis Presley", icon: "ðŸ‘‘", description: "The King. Took blues and country, made it dangerous, then safe, then strange again.", albums: [{ title: "Elvis Is Back!", year: 1960 }, { title: "From Elvis in Memphis", year: 1969 }] },
                            chuck_berry: { name: "Chuck Berry", icon: "ðŸ¦†", description: "Invented the rock guitar solo. Every riff traces back here.", albums: [{ title: "Chuck Berry Is on Top", year: 1959 }, { title: "St. Louis to Liverpool", year: 1964 }] }
                        }
                    },
                    british_invasion: { name: "BRITISH INVASION", icon: "ðŸ‡¬ðŸ‡§",
                        status: S([[1962, 1963, 'emerging'], [1964, 1966, 'peak'], [1967, 1969, 'fading']]),
                        artists: {
                            beatles: { name: "The Beatles", icon: "ðŸ", description: "Liverpool four-piece that rewrote the rules. Again. And again.", albums: [{ title: "A Hard Day's Night", year: 1964 }, { title: "Rubber Soul", year: 1965 }, { title: "Revolver", year: 1966 }, { title: "Abbey Road", year: 1969 }] },
                            rolling_stones: { name: "Rolling Stones", icon: "ðŸ‘…", description: "The anti-Beatles. Blues, swagger, menace.", albums: [{ title: "Out of Our Heads", year: 1965 }, { title: "Aftermath", year: 1966 }, { title: "Let It Bleed", year: 1969 }, { title: "Sticky Fingers", year: 1971 }, { title: "Exile on Main St.", year: 1972 }] },
                            the_who: { name: "The Who", icon: "ðŸ’¥", description: "Maximum R&B. Townshend's windmill, Moon's chaos.", albums: [{ title: "My Generation", year: 1965 }, { title: "Tommy", year: 1969 }, { title: "Who's Next", year: 1971 }] }
                        }
                    },
                    psychedelic: { name: "PSYCHEDELIC", icon: "ðŸŒ€",
                        status: S([[1965, 1966, 'emerging'], [1967, 1968, 'peak'], [1969, 1972, 'fading']]),
                        artists: {
                            hendrix: { name: "Jimi Hendrix", icon: "ðŸ”¥", description: "Rewired the electric guitar. Seattle via London via another dimension.", albums: [{ title: "Are You Experienced", year: 1967 }, { title: "Electric Ladyland", year: 1968 }] },
                            doors: { name: "The Doors", icon: "ðŸšª", description: "Morrison's poetry, Manzarek's keys. LA noir meets Dionysus.", albums: [{ title: "The Doors", year: 1967 }, { title: "Strange Days", year: 1967 }] },
                            jefferson_airplane: { name: "Jefferson Airplane", icon: "âœˆï¸", description: "San Francisco's flagship. Grace Slick's voice cut through the haze.", albums: [{ title: "Surrealistic Pillow", year: 1967 }, { title: "Crown of Creation", year: 1968 }] }
                        }
                    },
                    surf: { name: "SURF ROCK", icon: "ðŸ„",
                        status: S([[1960, 1961, 'rising'], [1962, 1963, 'peak'], [1964, 1966, 'fading']]),
                        artists: {
                            beach_boys: { name: "The Beach Boys", icon: "â˜€ï¸", description: "California myth-makers. Brian Wilson's genius took them far beyond surfing.", albums: [{ title: "Surfin' USA", year: 1963 }, { title: "Pet Sounds", year: 1966 }] },
                            dick_dale: { name: "Dick Dale", icon: "ðŸŒŠ", description: "King of the Surf Guitar. Misirlou. That reverb.", albums: [{ title: "Surfers' Choice", year: 1962 }] }
                        }
                    },
                    classic_rock: { name: "CLASSIC / ARENA ROCK", icon: "ðŸŸï¸",
                        status: S([[1968, 1969, 'emerging'], [1970, 1972, 'rising'], [1973, 1979, 'peak'], [1980, 1985, 'fading']]),
                        artists: {
                            led_zep: { name: "Led Zeppelin", icon: "ðŸ”¨", description: "The hammer of the gods. Bonham, Page, Plant, Jones. Heavy.", albums: [{ title: "Led Zeppelin II", year: 1969 }, { title: "Led Zeppelin IV", year: 1971 }, { title: "Physical Graffiti", year: 1975 }] },
                            pink_floyd: { name: "Pink Floyd", icon: "ðŸŒˆ", description: "Dark Side. The Wall. Comfortably Numb. Art as stadium rock.", albums: [{ title: "Dark Side of the Moon", year: 1973 }, { title: "Wish You Were Here", year: 1975 }, { title: "The Wall", year: 1979 }] },
                            queen: { name: "Queen", icon: "ðŸ‘‘", description: "Freddie Mercury's range. Brian May's guitar. Bohemian Rhapsody.", albums: [{ title: "A Night at the Opera", year: 1975 }, { title: "News of the World", year: 1977 }] },
                            fleetwood_pop: { name: "Fleetwood Mac", icon: "ðŸ¦", description: "Reinvented as pop-rock royalty. Rumours: heartbreak as art.", albums: [{ title: "Fleetwood Mac", year: 1975 }, { title: "Rumours", year: 1977 }] }
                        }
                    },
                    punk: { name: "PUNK", icon: "ðŸ¦´",
                        status: S([[1974, 1975, 'emerging'], [1976, 1978, 'peak'], [1979, 1981, 'fading'], [1993, 1996, 'rising'], [1997, 2000, 'peak'], [2001, 2005, 'fading']]),
                        artists: {
                            ramones: { name: "Ramones", icon: "ðŸ¦…", description: "Queens. 1-2-3-4! Two-minute songs that launched a thousand bands.", albums: [{ title: "Ramones", year: 1976 }, { title: "Rocket to Russia", year: 1977 }] },
                            sex_pistols: { name: "Sex Pistols", icon: "ðŸ”§", description: "Anarchy in the UK. One album. Changed everything.", albums: [{ title: "Never Mind the Bollocks", year: 1977 }] },
                            clash: { name: "The Clash", icon: "â­", description: "The only band that matters. Punk plus reggae plus everything.", albums: [{ title: "The Clash", year: 1977 }, { title: "London Calling", year: 1979 }] },
                            green_day: { name: "Green Day", icon: "ðŸ’£", description: "Brought punk to the suburbs. Dookie to American Idiot.", albums: [{ title: "Dookie", year: 1994 }, { title: "American Idiot", year: 2004 }] }
                        }
                    },
                    new_wave: { name: "NEW WAVE / POST-PUNK", icon: "ðŸ“»",
                        status: S([[1977, 1978, 'emerging'], [1979, 1981, 'rising'], [1982, 1985, 'peak'], [1986, 1989, 'fading']]),
                        artists: {
                            talking_heads: { name: "Talking Heads", icon: "ðŸ ", description: "David Byrne's big suit. Psycho Killer. Same as it ever was.", albums: [{ title: "Remain in Light", year: 1980 }, { title: "Speaking in Tongues", year: 1983 }] },
                            the_cure: { name: "The Cure", icon: "ðŸ’‹", description: "Robert Smith's lipstick and hair. Goth, pop, heartbreak, joy.", albums: [{ title: "Disintegration", year: 1989 }, { title: "Wish", year: 1992 }] },
                            joy_division: { name: "Joy Division", icon: "ðŸ“Š", description: "Ian Curtis. Unknown Pleasures. Atmosphere. Post-punk's beating heart.", albums: [{ title: "Unknown Pleasures", year: 1979 }, { title: "Closer", year: 1980 }] }
                        }
                    },
                    grunge: { name: "GRUNGE", icon: "ðŸŒ§ï¸",
                        status: S([[1988, 1990, 'emerging'], [1991, 1992, 'rising'], [1993, 1996, 'peak'], [1997, 2000, 'fading']]),
                        artists: {
                            nirvana: { name: "Nirvana", icon: "ðŸ˜", description: "Nevermind. Kurt Cobain screamed and whispered a generation awake.", albums: [{ title: "Nevermind", year: 1991 }, { title: "In Utero", year: 1993 }] },
                            pearl_jam: { name: "Pearl Jam", icon: "ðŸŒŠ", description: "Eddie Vedder's baritone. Ten. Alive. Still going.", albums: [{ title: "Ten", year: 1991 }, { title: "Vs.", year: 1993 }] },
                            soundgarden: { name: "Soundgarden", icon: "ðŸ•³ï¸", description: "Chris Cornell's voice. Black Hole Sun. Heavy, strange, beautiful.", albums: [{ title: "Badmotorfinger", year: 1991 }, { title: "Superunknown", year: 1994 }] },
                            alice: { name: "Alice in Chains", icon: "â›“ï¸", description: "Layne Staley and Jerry Cantrell. Harmonies from the abyss.", albums: [{ title: "Dirt", year: 1992 }, { title: "Jar of Flies", year: 1994 }] }
                        }
                    },
                    britpop: { name: "BRITPOP", icon: "ðŸ‡¬ðŸ‡§",
                        status: S([[1993, 1994, 'rising'], [1995, 1997, 'peak'], [1998, 2000, 'fading']]),
                        artists: {
                            oasis: { name: "Oasis", icon: "ðŸŒ…", description: "Gallagher brothers. Wonderwall. Definitely Maybe. Lads.", albums: [{ title: "Definitely Maybe", year: 1994 }, { title: "(What's the Story) Morning Glory?", year: 1995 }] },
                            blur: { name: "Blur", icon: "ðŸŽ¨", description: "Damon Albarn's art school cool. Parklife to experimental.", albums: [{ title: "Parklife", year: 1994 }, { title: "Blur", year: 1997 }] },
                            radiohead: { name: "Radiohead", icon: "ðŸ¤–", description: "OK Computer. Kid A. Kept evolving past everyone.", albums: [{ title: "The Bends", year: 1995 }, { title: "OK Computer", year: 1997 }, { title: "Kid A", year: 2000 }, { title: "In Rainbows", year: 2007 }] }
                        }
                    },
                    indie_rock: { name: "INDIE ROCK", icon: "ðŸŽª",
                        status: S([[1998, 2001, 'emerging'], [2002, 2005, 'rising'], [2006, 2015, 'peak'], [2016, 2025, 'fading']]),
                        artists: {
                            strokes: { name: "The Strokes", icon: "ðŸ—½", description: "Is This It. NYC garage revival. Made rock cool again in 2001.", albums: [{ title: "Is This It", year: 2001 }, { title: "Room on Fire", year: 2003 }] },
                            arcade_fire: { name: "Arcade Fire", icon: "ðŸ”¥", description: "Montreal collective. Funeral. Arena indie before that was a thing.", albums: [{ title: "Funeral", year: 2004 }, { title: "The Suburbs", year: 2010 }] },
                            white_stripes: { name: "The White Stripes", icon: "ðŸ”´", description: "Jack and Meg. Two people, one guitar, one drum kit. Seven Nation Army.", albums: [{ title: "White Blood Cells", year: 2001 }, { title: "Elephant", year: 2003 }] },
                            tame: { name: "Tame Impala", icon: "ðŸŒ€", description: "Kevin Parker's one-man psych-pop universe. Currents changed the game.", albums: [{ title: "Lonerism", year: 2012 }, { title: "Currents", year: 2015 }] }
                        }
                    }
                }
            },
            soul: {
                name: "SOUL / R&B", icon: "ðŸ’«",
                status: S([[1960, 2025, 'peak']]),
                subgenres: {
                    motown: { name: "MOTOWN", icon: "ðŸ­",
                        status: S([[1960, 1962, 'rising'], [1963, 1972, 'peak'], [1973, 1978, 'fading']]),
                        artists: {
                            supremes: { name: "The Supremes", icon: "ðŸ’Ž", description: "Diana Ross and Motown's crown jewels. Hit after hit.", albums: [{ title: "Where Did Our Love Go", year: 1964 }, { title: "I Hear a Symphony", year: 1966 }] },
                            temptations: { name: "The Temptations", icon: "ðŸ•º", description: "My Girl. Five voices, perfect choreography, unstoppable.", albums: [{ title: "The Temptations Sing Smokey", year: 1965 }, { title: "Cloud Nine", year: 1969 }] },
                            stevie_wonder: { name: "Stevie Wonder", icon: "ðŸŽ¹", description: "Little Stevie became a genius. The 70s run is untouchable.", albums: [{ title: "Uptight", year: 1966 }, { title: "Innervisions", year: 1973 }, { title: "Songs in the Key of Life", year: 1976 }] },
                            marvin_gaye: { name: "Marvin Gaye", icon: "ðŸŽ¤", description: "What's Going On. Let's Get It On. Soul with a conscience.", albums: [{ title: "How Sweet It Is", year: 1965 }, { title: "What's Going On", year: 1971 }, { title: "Let's Get It On", year: 1973 }] }
                        }
                    },
                    southern_soul: { name: "SOUTHERN SOUL", icon: "ðŸŒ™",
                        status: S([[1960, 1961, 'emerging'], [1962, 1963, 'rising'], [1964, 1968, 'peak'], [1969, 1973, 'fading']]),
                        artists: {
                            otis: { name: "Otis Redding", icon: "ðŸ’™", description: "Stax's greatest voice. Raw, urgent, gone too soon.", albums: [{ title: "Otis Blue", year: 1965 }, { title: "Dictionary of Soul", year: 1966 }] },
                            aretha: { name: "Aretha Franklin", icon: "ðŸ‘‘", description: "The Queen. Respect. That's it. That's the description.", albums: [{ title: "I Never Loved a Man", year: 1967 }, { title: "Lady Soul", year: 1968 }] },
                            sam_cooke: { name: "Sam Cooke", icon: "âœ¨", description: "Gospel smoothness turned secular. A Change Is Gonna Come.", albums: [{ title: "Night Beat", year: 1963 }, { title: "Ain't That Good News", year: 1964 }] }
                        }
                    },
                    funk: { name: "FUNK", icon: "ðŸ”Š",
                        status: S([[1965, 1967, 'emerging'], [1968, 1969, 'rising'], [1970, 1979, 'peak'], [1980, 1985, 'fading']]),
                        artists: {
                            james_brown: { name: "James Brown", icon: "ðŸ¦¶", description: "The Godfather. Invented funk. The one.", albums: [{ title: "Live at the Apollo", year: 1963 }, { title: "I Got You", year: 1966 }, { title: "The Payback", year: 1974 }] },
                            sly_stone: { name: "Sly & The Family Stone", icon: "ðŸŒˆ", description: "Integrated band, integrated sound. Everyday People.", albums: [{ title: "Stand!", year: 1969 }, { title: "There's a Riot Goin' On", year: 1971 }] },
                            parliament: { name: "Parliament-Funkadelic", icon: "ðŸ›¸", description: "George Clinton's mothership. One nation under a groove.", albums: [{ title: "Mothership Connection", year: 1975 }, { title: "One Nation Under a Groove", year: 1978 }] },
                            earth_wind: { name: "Earth, Wind & Fire", icon: "ðŸŒ", description: "September. Boogie Wonderland. Joy as a musical philosophy.", albums: [{ title: "That's the Way of the World", year: 1975 }, { title: "All 'N All", year: 1977 }] }
                        }
                    },
                    disco: { name: "DISCO", icon: "ðŸª©",
                        status: S([[1974, 1975, 'emerging'], [1976, 1977, 'rising'], [1978, 1979, 'peak'], [1980, 1982, 'fading']]),
                        artists: {
                            bee_gees: { name: "Bee Gees", icon: "ðŸ•º", description: "Stayin' Alive. The Gibbs brothers owned Saturday night.", albums: [{ title: "Saturday Night Fever", year: 1977 }] },
                            donna_summer: { name: "Donna Summer", icon: "ðŸ”¥", description: "Queen of Disco. I Feel Love. Moroder's synths + her voice.", albums: [{ title: "I Remember Yesterday", year: 1977 }, { title: "Bad Girls", year: 1979 }] },
                            chic: { name: "Chic", icon: "ðŸŽ¸", description: "Nile Rodgers and Bernard Edwards. Le Freak. Good Times. The groove.", albums: [{ title: "C'est Chic", year: 1978 }, { title: "RisquÃ©", year: 1979 }] }
                        }
                    },
                    neo_soul: { name: "NEO-SOUL", icon: "ðŸŒ¿",
                        status: S([[1995, 1997, 'emerging'], [1998, 2003, 'peak'], [2004, 2010, 'fading']]),
                        artists: {
                            dangelo: { name: "D'Angelo", icon: "ðŸ™", description: "Voodoo. Brown Sugar. Made R&B organic and raw again.", albums: [{ title: "Brown Sugar", year: 1995 }, { title: "Voodoo", year: 2000 }, { title: "Black Messiah", year: 2014 }] },
                            erykah: { name: "Erykah Badu", icon: "ðŸŒ»", description: "Baduizm. High priestess of neo-soul. Analog Girl in a Digital World.", albums: [{ title: "Baduizm", year: 1997 }, { title: "Mama's Gun", year: 2000 }] },
                            lauryn: { name: "Lauryn Hill", icon: "ðŸ‘¸", description: "Miseducation. One perfect solo album. That's enough.", albums: [{ title: "The Miseducation of Lauryn Hill", year: 1998 }] },
                            amy: { name: "Amy Winehouse", icon: "ðŸ–¤", description: "Back to Black. Voice from another era trapped in this one.", albums: [{ title: "Frank", year: 2003 }, { title: "Back to Black", year: 2006 }] }
                        }
                    },
                    modern_rnb: { name: "MODERN R&B", icon: "ðŸ’«",
                        status: S([[2010, 2013, 'emerging'], [2014, 2025, 'peak']]),
                        artists: {
                            frank_ocean: { name: "Frank Ocean", icon: "ðŸŒŠ", description: "Channel Orange. Blonde. Redefined vulnerability in R&B.", albums: [{ title: "Channel Orange", year: 2012 }, { title: "Blonde", year: 2016 }] },
                            sza: { name: "SZA", icon: "ðŸ¦‹", description: "Ctrl. SOS. Messy, honest, enormous. Generation-defining.", albums: [{ title: "Ctrl", year: 2017 }, { title: "SOS", year: 2022 }] },
                            beyonce: { name: "BeyoncÃ©", icon: "ðŸ", description: "Destiny's Child to solo dominance. Lemonade. Renaissance. The standard.", albums: [{ title: "B'Day", year: 2006 }, { title: "Lemonade", year: 2016 }, { title: "Renaissance", year: 2022 }] }
                        }
                    }
                }
            },
            hiphop: {
                name: "HIP HOP", icon: "ðŸŽ¤",
                status: S([[1979, 1984, 'emerging'], [1985, 1989, 'rising'], [1990, 2025, 'peak']]),
                subgenres: {
                    old_school: { name: "OLD SCHOOL", icon: "ðŸ“»",
                        status: S([[1979, 1981, 'emerging'], [1982, 1984, 'rising'], [1985, 1987, 'peak'], [1988, 1991, 'fading']]),
                        artists: {
                            grandmaster: { name: "Grandmaster Flash", icon: "âš¡", description: "The Message. The turntable as instrument. Hip hop's first masterpiece.", albums: [{ title: "The Message", year: 1982 }] },
                            run_dmc: { name: "Run-DMC", icon: "ðŸ‘Ÿ", description: "Walk This Way. Made hip hop rock. Adidas with no laces.", albums: [{ title: "Run-D.M.C.", year: 1984 }, { title: "Raising Hell", year: 1986 }] },
                            beastie_boys: { name: "Beastie Boys", icon: "ðŸ“¢", description: "Three white kids from NYC. Licensed to Ill to Paul's Boutique genius.", albums: [{ title: "Licensed to Ill", year: 1986 }, { title: "Paul's Boutique", year: 1989 }] },
                            public_enemy: { name: "Public Enemy", icon: "ðŸŽ¯", description: "Fight the Power. Chuck D's voice, Flavor Flav's clock, Bomb Squad's noise.", albums: [{ title: "It Takes a Nation of Millions", year: 1988 }, { title: "Fear of a Black Planet", year: 1990 }] }
                        }
                    },
                    golden_age: { name: "GOLDEN AGE", icon: "ðŸ†",
                        status: S([[1987, 1989, 'emerging'], [1990, 1992, 'rising'], [1993, 1996, 'peak'], [1997, 2000, 'fading']]),
                        artists: {
                            nas: { name: "Nas", icon: "ðŸ“œ", description: "Illmatic. Queensbridge poet. One perfect album and a career of great ones.", albums: [{ title: "Illmatic", year: 1994 }, { title: "It Was Written", year: 1996 }] },
                            wu_tang: { name: "Wu-Tang Clan", icon: "âš”ï¸", description: "36 Chambers. Staten Island's finest. Protect Ya Neck.", albums: [{ title: "Enter the Wu-Tang (36 Chambers)", year: 1993 }] },
                            tribe: { name: "A Tribe Called Quest", icon: "ðŸŽ·", description: "Jazz-rap pioneers. Can I Kick It? Yes you can.", albums: [{ title: "The Low End Theory", year: 1991 }, { title: "Midnight Marauders", year: 1993 }] },
                            biggie: { name: "The Notorious B.I.G.", icon: "ðŸ‘‘", description: "Ready to Die. Brooklyn's finest storyteller. Juicy.", albums: [{ title: "Ready to Die", year: 1994 }, { title: "Life After Death", year: 1997 }] },
                            tupac: { name: "Tupac Shakur", icon: "ðŸŒ¹", description: "All Eyez on Me. Poet, activist, icon. California Love.", albums: [{ title: "Me Against the World", year: 1995 }, { title: "All Eyez on Me", year: 1996 }] }
                        }
                    },
                    dirty_south: { name: "DIRTY SOUTH / ATL", icon: "ðŸ‘",
                        status: S([[1994, 1999, 'emerging'], [2000, 2003, 'rising'], [2004, 2008, 'peak'], [2009, 2012, 'fading']]),
                        artists: {
                            outkast: { name: "OutKast", icon: "ðŸ›¸", description: "AndrÃ© 3000 and Big Boi. ATLiens. Stankonia. Hey Ya!", albums: [{ title: "ATLiens", year: 1996 }, { title: "Aquemini", year: 1998 }, { title: "Stankonia", year: 2000 }] },
                            ugk: { name: "UGK", icon: "ðŸ¤ ", description: "Bun B and Pimp C. Texas trill. International Players Anthem.", albums: [{ title: "Ridin' Dirty", year: 1996 }, { title: "Underground Kingz", year: 2007 }] },
                            three_6: { name: "Three 6 Mafia", icon: "ðŸ˜ˆ", description: "Memphis. Dark, hypnotic, influential. Won an Oscar.", albums: [{ title: "Mystic Stylez", year: 1995 }, { title: "Most Known Unknown", year: 2005 }] }
                        }
                    },
                    mainstream_rap: { name: "MAINSTREAM RAP", icon: "ðŸ’°",
                        status: S([[1998, 2002, 'emerging'], [2003, 2005, 'rising'], [2006, 2012, 'peak'], [2013, 2016, 'fading']]),
                        artists: {
                            jay_z: { name: "Jay-Z", icon: "ðŸ’Ž", description: "Hov. Reasonable Doubt to Blueprint to empire. Brooklyn's own.", albums: [{ title: "Reasonable Doubt", year: 1996 }, { title: "The Blueprint", year: 2001 }, { title: "4:44", year: 2017 }] },
                            kanye: { name: "Kanye West", icon: "ðŸ»", description: "College Dropout. MBDTF. Yeezus. Genius producer turned complicated everything.", albums: [{ title: "The College Dropout", year: 2004 }, { title: "My Beautiful Dark Twisted Fantasy", year: 2010 }] },
                            eminem: { name: "Eminem", icon: "ðŸ’Š", description: "Slim Shady. Marshall Mathers. Best-selling rapper ever. Detroit.", albums: [{ title: "The Slim Shady LP", year: 1999 }, { title: "The Marshall Mathers LP", year: 2000 }] }
                        }
                    },
                    trap: { name: "TRAP / MODERN", icon: "ðŸ”¥",
                        status: S([[2012, 2014, 'emerging'], [2015, 2017, 'rising'], [2018, 2025, 'peak']]),
                        artists: {
                            kendrick: { name: "Kendrick Lamar", icon: "ðŸ¦…", description: "Good Kid, MAAD City. DAMN. Mr. Morale. Compton's prophet.", albums: [{ title: "good kid, m.A.A.d city", year: 2012 }, { title: "To Pimp a Butterfly", year: 2015 }, { title: "Mr. Morale & The Big Steppers", year: 2022 }] },
                            drake: { name: "Drake", icon: "ðŸ¦‰", description: "Started from the bottom. Singing rapper. Dominated streaming.", albums: [{ title: "Take Care", year: 2011 }, { title: "Nothing Was the Same", year: 2013 }] },
                            travis: { name: "Travis Scott", icon: "ðŸŒµ", description: "Astroworld. Rage. Houston's psychedelic trap auteur.", albums: [{ title: "Rodeo", year: 2015 }, { title: "Astroworld", year: 2018 }] },
                            tyler: { name: "Tyler, the Creator", icon: "ðŸŒº", description: "Odd Future to IGOR. Constant evolution.", albums: [{ title: "Flower Boy", year: 2017 }, { title: "IGOR", year: 2019 }, { title: "Call Me If You Get Lost", year: 2021 }] }
                        }
                    }
                }
            },
            electronic: {
                name: "ELECTRONIC", icon: "ðŸŽ›ï¸",
                status: S([[1970, 1979, 'emerging'], [1980, 1989, 'rising'], [1990, 2025, 'peak']]),
                subgenres: {
                    krautrock: { name: "KRAUTROCK / SYNTH", icon: "ðŸ¤–",
                        status: S([[1970, 1973, 'emerging'], [1974, 1978, 'peak'], [1979, 1983, 'fading']]),
                        artists: {
                            kraftwerk: { name: "Kraftwerk", icon: "ðŸš—", description: "Autobahn. Trans-Europe Express. DÃ¼sseldorf robots who invented the future.", albums: [{ title: "Autobahn", year: 1974 }, { title: "Trans-Europe Express", year: 1977 }, { title: "Computer World", year: 1981 }] },
                            tangerine: { name: "Tangerine Dream", icon: "ðŸŠ", description: "Berlin school. Sequencers and cosmic ambience.", albums: [{ title: "Phaedra", year: 1974 }, { title: "Rubycon", year: 1975 }] }
                        }
                    },
                    house: { name: "HOUSE", icon: "ðŸ ",
                        status: S([[1984, 1987, 'emerging'], [1988, 1990, 'rising'], [1991, 1998, 'peak'], [1999, 2005, 'fading'], [2012, 2025, 'peak']]),
                        artists: {
                            frankie: { name: "Frankie Knuckles", icon: "ðŸŽ§", description: "The Godfather of House. Chicago warehouse. Your Love.", albums: [{ title: "Beyond the Mix", year: 1991 }] },
                            daft_punk: { name: "Daft Punk", icon: "ðŸ¤–", description: "Around the World. Discovery. Random Access Memories. French robots.", albums: [{ title: "Homework", year: 1997 }, { title: "Discovery", year: 2001 }, { title: "Random Access Memories", year: 2013 }] },
                            disclosure: { name: "Disclosure", icon: "ðŸ”²", description: "UK brothers. Settle. Brought house to the streaming generation.", albums: [{ title: "Settle", year: 2013 }] }
                        }
                    },
                    techno: { name: "TECHNO", icon: "âš™ï¸",
                        status: S([[1985, 1989, 'emerging'], [1990, 1993, 'rising'], [1994, 2000, 'peak'], [2001, 2008, 'fading'], [2015, 2025, 'rising']]),
                        artists: {
                            derrick_may: { name: "Derrick May", icon: "ðŸŒƒ", description: "Detroit techno originator. Strings of Life. Innovator.", albums: [{ title: "Innovator", year: 1997 }] },
                            aphex: { name: "Aphex Twin", icon: "ðŸ˜Š", description: "Richard D. James. Selected Ambient Works. Windowlicker. Alien genius.", albums: [{ title: "Selected Ambient Works 85â€“92", year: 1992 }, { title: "Richard D. James Album", year: 1996 }] }
                        }
                    },
                    rave: { name: "RAVE / BIG BEAT", icon: "ðŸ’¥",
                        status: S([[1990, 1993, 'emerging'], [1994, 1997, 'peak'], [1998, 2002, 'fading']]),
                        artists: {
                            prodigy: { name: "The Prodigy", icon: "ðŸ”¥", description: "Firestarter. Breathe. Rave music with punk attitude.", albums: [{ title: "Music for the Jilted Generation", year: 1994 }, { title: "The Fat of the Land", year: 1997 }] },
                            chemical: { name: "The Chemical Brothers", icon: "ðŸ§ª", description: "Block Rockin' Beats. Big beat pioneers from Manchester.", albums: [{ title: "Dig Your Own Hole", year: 1997 }, { title: "Surrender", year: 1999 }] }
                        }
                    },
                    edm: { name: "EDM", icon: "ðŸŽ†",
                        status: S([[2008, 2010, 'emerging'], [2011, 2013, 'rising'], [2014, 2018, 'peak'], [2019, 2025, 'fading']]),
                        artists: {
                            skrillex: { name: "Skrillex", icon: "ðŸ‘¾", description: "Scary Monsters. Brought dubstep to the mainstream.", albums: [{ title: "Scary Monsters and Nice Sprites", year: 2010 }, { title: "Bangarang", year: 2012 }] },
                            flume: { name: "Flume", icon: "ðŸŒ¸", description: "Australian future bass. Self-titled debut at 21.", albums: [{ title: "Flume", year: 2012 }, { title: "Skin", year: 2016 }] }
                        }
                    },
                    ambient: { name: "AMBIENT / IDM", icon: "ðŸŒ«ï¸",
                        status: S([[1978, 1982, 'emerging'], [1983, 1990, 'rising'], [1991, 2000, 'peak'], [2001, 2025, 'fading']]),
                        artists: {
                            eno: { name: "Brian Eno", icon: "ðŸŽ¨", description: "Invented ambient music. Music for Airports. Producer to the stars.", albums: [{ title: "Music for Airports", year: 1978 }, { title: "Apollo", year: 1983 }] },
                            boards: { name: "Boards of Canada", icon: "ðŸ”ï¸", description: "Nostalgic electronica. Music Has the Right to Children. Haunted.", albums: [{ title: "Music Has the Right to Children", year: 1998 }, { title: "Geogaddi", year: 2002 }] }
                        }
                    }
                }
            },
            country: {
                name: "COUNTRY", icon: "ðŸ¤ ",
                status: S([[1960, 2025, 'peak']]),
                subgenres: {
                    nashville_sound: { name: "NASHVILLE SOUND", icon: "ðŸŽ»",
                        status: S([[1960, 1965, 'peak'], [1966, 1972, 'fading']]),
                        artists: {
                            patsy_cline: { name: "Patsy Cline", icon: "ðŸŒ¹", description: "Crazy. I Fall to Pieces. Country's greatest voice, gone too soon.", albums: [{ title: "Patsy Cline Showcase", year: 1961 }, { title: "Sentimentally Yours", year: 1962 }] },
                            jim_reeves: { name: "Jim Reeves", icon: "ðŸŽ™ï¸", description: "Gentleman Jim. Velvet voice, countrypolitan smooth.", albums: [{ title: "He'll Have to Go", year: 1960 }] }
                        }
                    },
                    outlaw_country: { name: "OUTLAW COUNTRY", icon: "ðŸ´â€â˜ ï¸",
                        status: S([[1966, 1969, 'emerging'], [1970, 1973, 'rising'], [1974, 1979, 'peak'], [1980, 1985, 'fading']]),
                        artists: {
                            johnny_cash: { name: "Johnny Cash", icon: "ðŸ–¤", description: "The Man in Black. Folsom Prison. American legend.", albums: [{ title: "Ring of Fire", year: 1963 }, { title: "At Folsom Prison", year: 1968 }, { title: "American Recordings", year: 1994 }] },
                            waylon: { name: "Waylon Jennings", icon: "ðŸŽ¸", description: "Refused Nashville's polish. Did it his way.", albums: [{ title: "Folk-Country", year: 1966 }, { title: "Honky Tonk Heroes", year: 1973 }] },
                            willie: { name: "Willie Nelson", icon: "ðŸŒ¿", description: "Red Headed Stranger. On the Road Again. Texas icon.", albums: [{ title: "Shotgun Willie", year: 1973 }, { title: "Red Headed Stranger", year: 1975 }] }
                        }
                    },
                    alt_country: { name: "ALT-COUNTRY", icon: "ðŸŒ¾",
                        status: S([[1990, 1994, 'emerging'], [1995, 2002, 'peak'], [2003, 2010, 'fading']]),
                        artists: {
                            wilco: { name: "Wilco", icon: "ðŸ“¡", description: "Jeff Tweedy. Uncle Tupelo to Yankee Hotel Foxtrot.", albums: [{ title: "Being There", year: 1996 }, { title: "Yankee Hotel Foxtrot", year: 2002 }] },
                            ryan_adams: { name: "Ryan Adams", icon: "ðŸ’”", description: "Heartbreaker. Whiskeytown to prolific solo career.", albums: [{ title: "Heartbreaker", year: 2000 }, { title: "Gold", year: 2001 }] }
                        }
                    },
                    modern_country: { name: "MODERN COUNTRY", icon: "ðŸ›»",
                        status: S([[2010, 2014, 'emerging'], [2015, 2025, 'peak']]),
                        artists: {
                            sturgill: { name: "Sturgill Simpson", icon: "ðŸŒ€", description: "Metamodern Sounds. Country's psychedelic outlaw for a new era.", albums: [{ title: "Metamodern Sounds in Country Music", year: 2014 }, { title: "A Sailor's Guide to Earth", year: 2016 }] },
                            tyler_childers: { name: "Tyler Childers", icon: "â›°ï¸", description: "Purgatory. Kentucky coal country voice. Appalachian new guard.", albums: [{ title: "Purgatory", year: 2017 }, { title: "Long Violent History", year: 2020 }] }
                        }
                    }
                }
            },
            folk: {
                name: "FOLK", icon: "ðŸƒ",
                status: S([[1960, 2025, 'peak']]),
                subgenres: {
                    traditional_folk: { name: "TRADITIONAL FOLK", icon: "ðŸª•",
                        status: S([[1960, 1963, 'peak'], [1964, 1969, 'fading']]),
                        artists: {
                            joan_baez: { name: "Joan Baez", icon: "ðŸ•Šï¸", description: "The voice of the movement. Pure, clear, committed.", albums: [{ title: "Joan Baez", year: 1960 }, { title: "Joan Baez in Concert", year: 1962 }] },
                            pete_seeger: { name: "Pete Seeger", icon: "ðŸª˜", description: "The link to Woody Guthrie. Keeper of the flame.", albums: [{ title: "We Shall Overcome", year: 1963 }] }
                        }
                    },
                    folk_rock: { name: "FOLK ROCK", icon: "âš¡",
                        status: S([[1964, 1964, 'emerging'], [1965, 1967, 'peak'], [1968, 1972, 'fading']]),
                        artists: {
                            dylan: { name: "Bob Dylan", icon: "ðŸŒ¬ï¸", description: "Went electric at Newport. They booed. He didn't care.", albums: [{ title: "The Freewheelin' Bob Dylan", year: 1963 }, { title: "Highway 61 Revisited", year: 1965 }, { title: "Blonde on Blonde", year: 1966 }, { title: "Blood on the Tracks", year: 1975 }] },
                            byrds: { name: "The Byrds", icon: "ðŸ¦…", description: "Jangle and shimmer. Dylan through a Rickenbacker.", albums: [{ title: "Mr. Tambourine Man", year: 1965 }, { title: "Younger Than Yesterday", year: 1967 }] },
                            simon_garfunkel: { name: "Simon & Garfunkel", icon: "ðŸŒ‰", description: "The Sound of Silence. Poetry and harmony from Queens.", albums: [{ title: "Sounds of Silence", year: 1966 }, { title: "Bookends", year: 1968 }] }
                        }
                    },
                    singer_songwriter: { name: "SINGER-SONGWRITER", icon: "âœï¸",
                        status: S([[1968, 1970, 'emerging'], [1971, 1976, 'peak'], [1977, 1982, 'fading']]),
                        artists: {
                            joni: { name: "Joni Mitchell", icon: "ðŸŽ¨", description: "Blue. Court and Spark. Painted in sound. Peerless.", albums: [{ title: "Blue", year: 1971 }, { title: "Court and Spark", year: 1974 }] },
                            james_taylor: { name: "James Taylor", icon: "ðŸŒ…", description: "Fire and Rain. Sweet Baby James. Laurel Canyon warmth.", albums: [{ title: "Sweet Baby James", year: 1970 }] },
                            cat_stevens: { name: "Cat Stevens", icon: "ðŸš‚", description: "Peace Train. Wild World. Tea for the Tillerman. Then walked away.", albums: [{ title: "Tea for the Tillerman", year: 1970 }, { title: "Teaser and the Firecat", year: 1971 }] },
                            nick_drake: { name: "Nick Drake", icon: "ðŸŒ™", description: "Pink Moon. Three albums, no fame, then gone. Discovered too late.", albums: [{ title: "Five Leaves Left", year: 1969 }, { title: "Pink Moon", year: 1972 }] }
                        }
                    },
                    indie_folk: { name: "INDIE FOLK", icon: "ðŸ•ï¸",
                        status: S([[2004, 2007, 'emerging'], [2008, 2013, 'peak'], [2014, 2020, 'fading']]),
                        artists: {
                            bon_iver: { name: "Bon Iver", icon: "â„ï¸", description: "Justin Vernon in a cabin. For Emma. Skinny Love. Then reinvented everything.", albums: [{ title: "For Emma, Forever Ago", year: 2008 }, { title: "22, A Million", year: 2016 }] },
                            fleet_foxes: { name: "Fleet Foxes", icon: "ðŸ¦Š", description: "Robin Pecknold. Baroque folk harmonies from Seattle. Timeless.", albums: [{ title: "Fleet Foxes", year: 2008 }, { title: "Helplessness Blues", year: 2011 }] },
                            iron_wine: { name: "Iron & Wine", icon: "ðŸ·", description: "Sam Beam's whisper. The Creek Drank the Cradle. Hushed beauty.", albums: [{ title: "The Creek Drank the Cradle", year: 2002 }, { title: "Our Endless Numbered Days", year: 2004 }] }
                        }
                    }
                }
            },
            jazz: {
                name: "JAZZ", icon: "ðŸŽ·",
                status: S([[1960, 2025, 'peak']]),
                subgenres: {
                    hard_bop: { name: "HARD BOP", icon: "ðŸ”¨",
                        status: S([[1960, 1962, 'peak'], [1963, 1968, 'fading']]),
                        artists: {
                            coltrane: { name: "John Coltrane", icon: "ðŸ™", description: "From hard bop through sheets of sound to spiritual transcendence.", albums: [{ title: "My Favorite Things", year: 1961 }, { title: "A Love Supreme", year: 1965 }] },
                            miles: { name: "Miles Davis", icon: "ðŸŽº", description: "Cool incarnate. Reinvented jazz every decade.", albums: [{ title: "Sketches of Spain", year: 1960 }, { title: "Miles Smiles", year: 1967 }, { title: "Bitches Brew", year: 1970 }] },
                            mingus: { name: "Charles Mingus", icon: "ðŸŽ»", description: "Composer, bandleader, force of nature. The bass as orchestra.", albums: [{ title: "The Black Saint and the Sinner Lady", year: 1963 }] }
                        }
                    },
                    free_jazz: { name: "FREE JAZZ", icon: "ðŸŒŒ",
                        status: S([[1960, 1962, 'rising'], [1963, 1966, 'peak'], [1967, 1972, 'fading']]),
                        artists: {
                            ornette: { name: "Ornette Coleman", icon: "ðŸ”®", description: "Threw out the rulebook. Free Jazz wasn't a genre, it was a declaration.", albums: [{ title: "Free Jazz", year: 1961 }, { title: "The Shape of Jazz to Come", year: 1959 }] },
                            sun_ra: { name: "Sun Ra", icon: "ðŸª", description: "From Saturn. Arkestra. Space is the place.", albums: [{ title: "The Futuristic Sounds of Sun Ra", year: 1961 }, { title: "Space Is the Place", year: 1973 }] }
                        }
                    },
                    bossa_nova: { name: "BOSSA NOVA", icon: "ðŸ‡§ðŸ‡·",
                        status: S([[1960, 1961, 'rising'], [1962, 1965, 'peak'], [1966, 1972, 'fading']]),
                        artists: {
                            jobim: { name: "Antonio Carlos Jobim", icon: "ðŸŒ´", description: "The Girl from Ipanema. Brazilian genius who changed jazz.", albums: [{ title: "Getz/Gilberto", year: 1964 }] },
                            stan_getz: { name: "Stan Getz", icon: "ðŸŽ·", description: "The Sound. Brought bossa nova to America.", albums: [{ title: "Jazz Samba", year: 1962 }] }
                        }
                    },
                    fusion: { name: "JAZZ FUSION", icon: "âš¡",
                        status: S([[1968, 1970, 'emerging'], [1971, 1974, 'rising'], [1975, 1979, 'peak'], [1980, 1985, 'fading']]),
                        artists: {
                            herbie: { name: "Herbie Hancock", icon: "ðŸŽ¹", description: "Head Hunters. Future Shock. Jazz that bumps.", albums: [{ title: "Head Hunters", year: 1973 }, { title: "Future Shock", year: 1983 }] },
                            weather_report: { name: "Weather Report", icon: "ðŸŒ¤ï¸", description: "Zawinul and Shorter. Birdland. Jazz fusion's greatest band.", albums: [{ title: "Heavy Weather", year: 1977 }] },
                            return_forever: { name: "Return to Forever", icon: "ðŸ”¥", description: "Chick Corea's electric group. Romantic Warrior. Virtuosity.", albums: [{ title: "Romantic Warrior", year: 1976 }] }
                        }
                    },
                    modern_jazz: { name: "MODERN JAZZ", icon: "ðŸŽµ",
                        status: S([[2005, 2010, 'emerging'], [2011, 2015, 'rising'], [2016, 2025, 'peak']]),
                        artists: {
                            kamasi: { name: "Kamasi Washington", icon: "ðŸŽ·", description: "The Epic. Brought jazz back to the conversation. Spiritual.", albums: [{ title: "The Epic", year: 2015 }, { title: "Heaven and Earth", year: 2018 }] },
                            robert_glasper: { name: "Robert Glasper", icon: "ðŸŽ¹", description: "Black Radio. Jazz meets hip hop meets R&B. Genre-fluid.", albums: [{ title: "Black Radio", year: 2012 }] },
                            shabaka: { name: "Shabaka Hutchings", icon: "ðŸŒ", description: "Sons of Kemet. The Comet Is Coming. London's jazz renaissance.", albums: [{ title: "Your Queen Is a Reptile", year: 2018 }] }
                        }
                    }
                }
            },
            blues: {
                name: "BLUES", icon: "ðŸ”µ",
                status: S([[1960, 2025, 'peak']]),
                subgenres: {
                    chicago_blues: { name: "CHICAGO BLUES", icon: "ðŸŒƒ",
                        status: S([[1960, 1962, 'peak'], [1963, 1970, 'fading']]),
                        artists: {
                            muddy: { name: "Muddy Waters", icon: "ðŸŒŠ", description: "Electrified the Delta. Every British kid wanted to be him.", albums: [{ title: "Muddy Waters at Newport", year: 1960 }] },
                            howlin: { name: "Howlin' Wolf", icon: "ðŸº", description: "That voice. Huge, terrifying, elemental.", albums: [{ title: "Howlin' Wolf", year: 1962 }] },
                            bb_king: { name: "B.B. King", icon: "ðŸ‘‘", description: "Lucille. The thrill is gone. King of the Blues.", albums: [{ title: "Live at the Regal", year: 1965 }] }
                        }
                    },
                    british_blues: { name: "BRITISH BLUES", icon: "ðŸ‡¬ðŸ‡§",
                        status: S([[1963, 1965, 'emerging'], [1966, 1970, 'peak'], [1971, 1975, 'fading']]),
                        artists: {
                            mayall: { name: "John Mayall", icon: "ðŸŽ“", description: "The schoolmaster. Clapton, Peter Green, Mick Taylor all came through.", albums: [{ title: "Blues Breakers with Eric Clapton", year: 1966 }] },
                            fleetwood: { name: "Fleetwood Mac", icon: "ðŸ¦", description: "Before Rumours, they were a blues band. Peter Green's otherworldly tone.", albums: [{ title: "Fleetwood Mac", year: 1968 }, { title: "Then Play On", year: 1969 }] },
                            cream: { name: "Cream", icon: "ðŸŽ¸", description: "Clapton, Baker, Bruce. Power trio. Crossroads. Sunshine of Your Love.", albums: [{ title: "Disraeli Gears", year: 1967 }, { title: "Wheels of Fire", year: 1968 }] }
                        }
                    },
                    blues_rock: { name: "BLUES ROCK", icon: "ðŸ”¥",
                        status: S([[1969, 1971, 'emerging'], [1972, 1975, 'peak'], [1976, 1980, 'fading']]),
                        artists: {
                            allman: { name: "Allman Brothers Band", icon: "ðŸ‘", description: "Duane and Gregg. At Fillmore East. Southern blues rock perfection.", albums: [{ title: "At Fillmore East", year: 1971 }, { title: "Eat a Peach", year: 1972 }] },
                            zz_top: { name: "ZZ Top", icon: "ðŸ§”", description: "Texas boogie. La Grange. Sharp Dressed Man. Those beards.", albums: [{ title: "Tres Hombres", year: 1973 }, { title: "Eliminator", year: 1983 }] },
                            srv: { name: "Stevie Ray Vaughan", icon: "âš¡", description: "Texas Flood. Last great blues guitar hero. Breathtaking.", albums: [{ title: "Texas Flood", year: 1983 }, { title: "Couldn't Stand the Weather", year: 1984 }] }
                        }
                    }
                }
            }
        };

        let currentYear = 1960;
        let selectedSubgenre = null;
        let selectedGenre = null;
        let activeFilter = 'all';

        // Rankings state
        let rankingsYearFilter = null;

        // Mock rankings data
        const mockRankings = [
            // Rock
            { id: 'beatles', name: 'The Beatles', genres: ['rock', 'pop'], subgenres: ['british-invasion', 'psychedelic'], score: 98, active: [1960, 1970], albums: [{title: 'Abbey Road', year: 1969}, {title: 'Sgt. Pepper', year: 1967}] },
            { id: 'led-zeppelin', name: 'Led Zeppelin', genres: ['rock'], subgenres: ['hard-rock', 'blues-rock'], score: 96, active: [1968, 1980], albums: [{title: 'IV', year: 1971}, {title: 'Physical Graffiti', year: 1975}] },
            { id: 'pink-floyd', name: 'Pink Floyd', genres: ['rock'], subgenres: ['psychedelic', 'prog'], score: 95, active: [1967, 1995], albums: [{title: 'Dark Side of the Moon', year: 1973}, {title: 'The Wall', year: 1979}] },
            { id: 'nirvana', name: 'Nirvana', genres: ['rock'], subgenres: ['grunge', 'alternative'], score: 94, active: [1987, 1994], albums: [{title: 'Nevermind', year: 1991}, {title: 'In Utero', year: 1993}] },
            { id: 'radiohead', name: 'Radiohead', genres: ['rock'], subgenres: ['alternative', 'art-rock'], score: 93, active: [1992, 2025], albums: [{title: 'OK Computer', year: 1997}, {title: 'Kid A', year: 2000}] },
            { id: 'queen', name: 'Queen', genres: ['rock'], subgenres: ['glam', 'arena-rock'], score: 92, active: [1970, 1995], albums: [{title: 'A Night at the Opera', year: 1975}, {title: 'News of the World', year: 1977}] },
            { id: 'rolling-stones', name: 'The Rolling Stones', genres: ['rock'], subgenres: ['british-invasion', 'blues-rock'], score: 91, active: [1962, 2025], albums: [{title: 'Exile on Main St.', year: 1972}, {title: 'Let It Bleed', year: 1969}] },
            { id: 'the-who', name: 'The Who', genres: ['rock'], subgenres: ['british-invasion', 'hard-rock'], score: 89, active: [1964, 1983], albums: [{title: 'Who\'s Next', year: 1971}, {title: 'Tommy', year: 1969}] },
            { id: 'pearl-jam', name: 'Pearl Jam', genres: ['rock'], subgenres: ['grunge', 'alternative'], score: 85, active: [1990, 2025], albums: [{title: 'Ten', year: 1991}, {title: 'Vs.', year: 1993}] },
            { id: 'soundgarden', name: 'Soundgarden', genres: ['rock'], subgenres: ['grunge', 'metal'], score: 82, active: [1984, 2017], albums: [{title: 'Superunknown', year: 1994}, {title: 'Badmotorfinger', year: 1991}] },
            { id: 'arcade-fire', name: 'Arcade Fire', genres: ['rock'], subgenres: ['indie-rock', 'art-rock'], score: 78, active: [2001, 2025], albums: [{title: 'Funeral', year: 2004}, {title: 'The Suburbs', year: 2010}] },
            { id: 'the-strokes', name: 'The Strokes', genres: ['rock'], subgenres: ['indie-rock', 'garage'], score: 76, active: [1998, 2025], albums: [{title: 'Is This It', year: 2001}, {title: 'Room on Fire', year: 2003}] },
            { id: 'tame-impala', name: 'Tame Impala', genres: ['rock'], subgenres: ['psychedelic', 'indie-rock'], score: 74, active: [2007, 2025], albums: [{title: 'Currents', year: 2015}, {title: 'Lonerism', year: 2012}] },
            { id: 'flip-turn', name: 'Flip Turn', genres: ['rock'], subgenres: ['indie-rock'], score: 42, active: [2015, 2025], albums: [{title: 'Shadowglow', year: 2023}] },
            // Hip Hop
            { id: 'kendrick', name: 'Kendrick Lamar', genres: ['hiphop'], subgenres: ['conscious', 'west-coast'], score: 97, active: [2004, 2025], albums: [{title: 'To Pimp a Butterfly', year: 2015}, {title: 'good kid, m.A.A.d city', year: 2012}] },
            { id: 'kanye', name: 'Kanye West', genres: ['hiphop'], subgenres: ['conscious', 'art-rap'], score: 95, active: [1996, 2025], albums: [{title: 'My Beautiful Dark Twisted Fantasy', year: 2010}, {title: 'The College Dropout', year: 2004}] },
            { id: 'nas', name: 'Nas', genres: ['hiphop'], subgenres: ['east-coast', 'conscious'], score: 94, active: [1991, 2025], albums: [{title: 'Illmatic', year: 1994}] },
            { id: 'jay-z', name: 'Jay-Z', genres: ['hiphop'], subgenres: ['east-coast'], score: 93, active: [1995, 2025], albums: [{title: 'The Blueprint', year: 2001}, {title: 'Reasonable Doubt', year: 1996}] },
            { id: 'outkast', name: 'OutKast', genres: ['hiphop'], subgenres: ['southern', 'experimental'], score: 92, active: [1992, 2006], albums: [{title: 'Stankonia', year: 2000}, {title: 'Aquemini', year: 1998}] },
            { id: 'wu-tang', name: 'Wu-Tang Clan', genres: ['hiphop'], subgenres: ['east-coast', 'hardcore'], score: 90, active: [1992, 2025], albums: [{title: 'Enter the Wu-Tang', year: 1993}] },
            { id: 'tyler', name: 'Tyler, the Creator', genres: ['hiphop'], subgenres: ['alternative', 'experimental'], score: 85, active: [2007, 2025], albums: [{title: 'IGOR', year: 2019}, {title: 'Flower Boy', year: 2017}] },
            // Pop
            { id: 'mj', name: 'Michael Jackson', genres: ['pop', 'soul'], subgenres: ['dance-pop', 'funk'], score: 99, active: [1964, 2009], albums: [{title: 'Thriller', year: 1982}, {title: 'Bad', year: 1987}] },
            { id: 'prince', name: 'Prince', genres: ['pop', 'rock', 'soul'], subgenres: ['funk', 'synth-pop'], score: 96, active: [1976, 2016], albums: [{title: 'Purple Rain', year: 1984}, {title: 'Sign o\' the Times', year: 1987}] },
            { id: 'madonna', name: 'Madonna', genres: ['pop'], subgenres: ['dance-pop', 'synth-pop'], score: 94, active: [1982, 2025], albums: [{title: 'Like a Prayer', year: 1989}, {title: 'Ray of Light', year: 1998}] },
            { id: 'bowie', name: 'David Bowie', genres: ['rock', 'pop'], subgenres: ['glam', 'art-rock'], score: 88, active: [1969, 2016], albums: [{title: 'Ziggy Stardust', year: 1972}, {title: 'Low', year: 1977}] },
            { id: 'taylor', name: 'Taylor Swift', genres: ['pop', 'country'], subgenres: ['synth-pop', 'folk-pop'], score: 88, active: [2004, 2025], albums: [{title: 'Folklore', year: 2020}, {title: '1989', year: 2014}] },
            { id: 'billie', name: 'Billie Eilish', genres: ['pop'], subgenres: ['electropop', 'alt-pop'], score: 82, active: [2015, 2025], albums: [{title: 'When We All Fall Asleep', year: 2019}] },
            // Soul/R&B
            { id: 'stevie', name: 'Stevie Wonder', genres: ['soul'], subgenres: ['motown', 'funk'], score: 97, active: [1961, 2025], albums: [{title: 'Songs in the Key of Life', year: 1976}, {title: 'Innervisions', year: 1973}] },
            { id: 'marvin', name: 'Marvin Gaye', genres: ['soul'], subgenres: ['motown', 'quiet-storm'], score: 95, active: [1961, 1984], albums: [{title: 'What\'s Going On', year: 1971}] },
            { id: 'aretha', name: 'Aretha Franklin', genres: ['soul'], subgenres: ['southern-soul', 'gospel'], score: 94, active: [1956, 2017], albums: [{title: 'I Never Loved a Man', year: 1967}] },
            { id: 'dangelo', name: 'D\'Angelo', genres: ['soul'], subgenres: ['neo-soul'], score: 89, active: [1994, 2025], albums: [{title: 'Voodoo', year: 2000}, {title: 'Black Messiah', year: 2014}] },
            { id: 'frank-ocean', name: 'Frank Ocean', genres: ['soul', 'hiphop'], subgenres: ['neo-soul', 'alt-rnb'], score: 88, active: [2010, 2025], albums: [{title: 'Blonde', year: 2016}, {title: 'Channel Orange', year: 2012}] },
            // Jazz
            { id: 'miles', name: 'Miles Davis', genres: ['jazz'], subgenres: ['bebop', 'fusion', 'cool'], score: 98, active: [1944, 1991], albums: [{title: 'Kind of Blue', year: 1959}, {title: 'Bitches Brew', year: 1970}] },
            { id: 'coltrane', name: 'John Coltrane', genres: ['jazz'], subgenres: ['bebop', 'free-jazz'], score: 96, active: [1955, 1967], albums: [{title: 'A Love Supreme', year: 1965}] },
            { id: 'herbie', name: 'Herbie Hancock', genres: ['jazz'], subgenres: ['fusion', 'funk'], score: 90, active: [1962, 2025], albums: [{title: 'Head Hunters', year: 1973}] },
            // Electronic
            { id: 'daftpunk', name: 'Daft Punk', genres: ['electronic'], subgenres: ['house', 'french-touch'], score: 94, active: [1993, 2021], albums: [{title: 'Discovery', year: 2001}, {title: 'Random Access Memories', year: 2013}] },
            { id: 'aphex', name: 'Aphex Twin', genres: ['electronic'], subgenres: ['idm', 'ambient'], score: 91, active: [1985, 2025], albums: [{title: 'Selected Ambient Works', year: 1992}] },
            { id: 'kraftwerk', name: 'Kraftwerk', genres: ['electronic'], subgenres: ['synth', 'electro'], score: 93, active: [1970, 2025], albums: [{title: 'Trans-Europe Express', year: 1977}] },
        ];

        // Genre origin stories for contextual messaging
        const genreOrigins = {
            pop: { emergeYear: 1960, story: "Pop music has been around since the start of our timeline, evolving from Tin Pan Alley and early rock and roll." },
            rock: { emergeYear: 1960, story: "Rock emerged in the late 1950s from blues, country, and R&B. By 1960, it was already transforming popular music." },
            soul: { emergeYear: 1960, story: "Soul music grew from gospel and R&B in the late 1950s, reaching full form with artists like Ray Charles and Sam Cooke." },
            jazz: { emergeYear: 1960, story: "Jazz had been thriving since the early 1900s. By 1960, bebop was established and new forms like free jazz were emerging." },
            hiphop: { emergeYear: 1973, story: "Hip hop wouldn't exist until 1973, when DJ Kool Herc threw a back-to-school party in the Bronx and isolated the 'break' â€” the instrumental section where dancers went off. From that moment, hip hop was born." },
            electronic: { emergeYear: 1970, story: "Electronic music as a distinct genre emerged around 1970 with Kraftwerk and other experimenters using synthesizers. Before this, electronic sounds were mostly confined to academic studios and film scores." },
            country: { emergeYear: 1960, story: "Country music has deep roots in American folk traditions, well established by the 1960s through the Grand Ole Opry and artists like Hank Williams." },
            folk: { emergeYear: 1960, story: "Folk music traditions stretch back centuries. The 1960s folk revival was already underway with artists like Pete Seeger paving the way." }
        };

        const yearSlider = document.getElementById('yearSlider');
        const currentYearDisplay = document.getElementById('currentYear');
        const genreGroups = document.getElementById('genreGroups');
        const albumBars = document.getElementById('albumBars');
        const artistPanel = document.getElementById('artistPanel');

        // Rankings elements
        const rankingsList = document.getElementById('rankingsList');
        const rankingsGenreEl = document.getElementById('rankingsGenre');
        const rankingsYearTag = document.getElementById('rankingsYearTag');
        const rankingsCount = document.getElementById('rankingsCount');
        const clearYearBtn = document.getElementById('clearYearBtn');
        const clearYearLabel = document.getElementById('clearYearLabel');
        const artistPopupOverlay = document.getElementById('artistPopupOverlay');

        // Sidebar filter clicks
        document.querySelectorAll('.genre-link[data-filter]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.genre-link[data-filter]').forEach(l => l.classList.remove('filter-active'));
                link.classList.add('filter-active');
                activeFilter = link.dataset.filter;
                if (activeFilter === 'all') { closeArtistPanel(); }
                else { selectedGenre = activeFilter; selectedSubgenre = null; showGenrePanel(activeFilter); }
                renderGenreGroups();
                renderRankings();
            });
        });

        // Decade button clicks
        document.querySelectorAll('.decade-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const year = parseInt(btn.dataset.year);
                yearSlider.value = year;
                updateYear(year);
            });
        });

        function updateDecadeButtons() {
            const decadeStart = Math.floor(currentYear / 10) * 10;
            document.querySelectorAll('.decade-btn').forEach(btn => {
                const btnYear = parseInt(btn.dataset.year);
                const btnDecade = Math.floor(btnYear / 10) * 10;
                btn.classList.toggle('active', btnDecade === decadeStart);
            });
        }

        function getAlbumCounts() {
            const counts = {};
            for (let y = MIN_YEAR; y <= MAX_YEAR; y++) counts[y] = 0;
            Object.entries(musicData).forEach(([genreId, genre]) => {
                if (activeFilter !== 'all' && genreId !== activeFilter) return;
                Object.values(genre.subgenres).forEach(subgenre => {
                    Object.values(subgenre.artists).forEach(artist => {
                        artist.albums.forEach(album => {
                            if (album.year >= MIN_YEAR && album.year <= MAX_YEAR) counts[album.year]++;
                        });
                    });
                });
            });
            return counts;
        }

        function renderAlbumBars() {
            const counts = getAlbumCounts();
            const maxCount = Math.max(...Object.values(counts), 1);
            albumBars.innerHTML = '';
            for (let y = MIN_YEAR; y <= MAX_YEAR; y++) {
                const bar = document.createElement('div');
                bar.className = `album-bar${y === currentYear ? ' active' : ''}`;
                const height = maxCount > 0 ? (counts[y] / maxCount) * 100 : 0;
                bar.style.height = `${Math.max(height, 4)}%`;
                bar.title = `${y}: ${counts[y]} albums`;
                bar.onclick = () => { yearSlider.value = y; updateYear(y); };
                albumBars.appendChild(bar);
            }
        }

        function updateYear(year) {
            currentYear = parseInt(year);
            currentYearDisplay.textContent = currentYear;
            updateDecadeButtons();
            renderAlbumBars();
            renderGenreGroups();
            if (selectedGenre && selectedSubgenre) {
                const subgenre = musicData[selectedGenre]?.subgenres[selectedSubgenre];
                if (subgenre && subgenre.status[currentYear] !== 'hidden') { showArtistsPanel(selectedGenre, selectedSubgenre); }
                else { selectedGenre = null; selectedSubgenre = null; artistPanel.classList.remove('visible'); renderGenreGroups(); }
            } else if (selectedGenre && !selectedSubgenre) { showGenrePanel(selectedGenre); }
            // Update rankings year filter
            rankingsYearFilter = currentYear;
            renderRankings();
        }

        function renderGenreGroups() {
            genreGroups.innerHTML = '';
            Object.entries(musicData).forEach(([genreId, genre]) => {
                if (activeFilter !== 'all' && genreId !== activeFilter) return;
                const visibleSubgenres = Object.entries(genre.subgenres).filter(([id, sub]) => sub.status[currentYear] !== 'hidden');
                if (visibleSubgenres.length === 0) return;
                const group = document.createElement('div');
                group.className = 'genre-group';
                const bracket = document.createElement('div');
                bracket.className = 'genre-bracket';
                bracket.innerHTML = `<div class="bracket-line"></div><span class="bracket-icon">${genre.icon}</span><span class="genre-label">${genre.name}</span><div class="bracket-line"></div>`;
                const subgenresGrid = document.createElement('div');
                subgenresGrid.className = 'subgenres-grid';
                visibleSubgenres.forEach(([subId, subgenre]) => {
                    const status = subgenre.status[currentYear];
                    const isSelected = selectedGenre === genreId && selectedSubgenre === subId;
                    const artistNames = Object.values(subgenre.artists).map(a => a.name);
                    const item = document.createElement('div');
                    item.className = `subgenre-item ${status}${isSelected ? ' active' : ''}`;
                    item.onclick = () => selectSubgenre(genreId, subId);
                    item.innerHTML = `<div class="subgenre-header"><span class="icon">${subgenre.icon}</span><span class="name">${subgenre.name}</span></div><div class="artist-list">${artistNames.map(name => `<span>${name}</span>`).join('')}</div>`;
                    subgenresGrid.appendChild(item);
                });
                group.appendChild(bracket);
                group.appendChild(subgenresGrid);
                genreGroups.appendChild(group);
            });
        }

        function selectSubgenre(genreId, subgenreId) {
            if (selectedGenre === genreId && selectedSubgenre === subgenreId) { selectedGenre = null; selectedSubgenre = null; closeArtistPanel(); }
            else { selectedGenre = genreId; selectedSubgenre = subgenreId; showArtistsPanel(genreId, subgenreId); }
            renderGenreGroups();
        }

        function makeAlbumHtml(artist) {
            return artist.albums.map((a, index) => {
                const isCY = a.year === currentYear;
                const isLast = index === artist.albums.length - 1;
                return `<div style="padding: 8px 0; ${isCY ? 'background: rgba(240, 192, 20, 0.08); margin: 0 -10px; padding-left: 10px; padding-right: 10px;' : ''} ${!isLast ? 'border-bottom: 1px solid var(--gray-800);' : ''}"><div style="display: flex; align-items: baseline; gap: 6px; margin-bottom: 5px;"><span style="font-size: 0.85rem; color: ${isCY ? 'var(--yellow)' : 'var(--gray-400)'};">${a.title}</span><span style="font-size: 0.7rem; color: var(--gray-600);">${a.year}</span>${isCY ? '<span style="font-size: 0.6rem; color: var(--yellow); font-weight: 600;">â˜…</span>' : ''}</div><div class="album-links"><a href="#" class="album-link spotify">SPOTIFY</a><a href="#" class="album-link wiki">WIKI</a><a href="#" class="album-link buy">FIND CD</a></div></div>`;
            }).join('');
        }

        function makeArtistCard(artist) {
            const hasCurrentYearAlbum = artist.albums.some(a => a.year === currentYear);
            const card = document.createElement('div');
            card.className = 'album-card';
            if (hasCurrentYearAlbum) card.style.borderColor = 'var(--yellow)';
            card.innerHTML = `<div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px;"><span style="font-size: 1.5rem;">${artist.icon}</span><div><h4 style="margin: 0; font-size: 0.9rem; color: var(--yellow);">${artist.name}</h4><p style="margin: 4px 0 0 0; font-size: 0.75rem; color: var(--gray-400); line-height: 1.4;">${artist.description}</p></div></div><div class="albums-list">${makeAlbumHtml(artist)}</div>`;
            return card;
        }

        function showArtistsPanel(genreId, subgenreId) {
            const genre = musicData[genreId];
            const subgenre = genre.subgenres[subgenreId];
            const status = subgenre.status[currentYear];
            document.getElementById('artistIcon').textContent = subgenre.icon;
            document.getElementById('artistName').textContent = subgenre.name;
            document.getElementById('artistSubgenre').textContent = `${genre.name} Â· ${currentYear} Â· ${status.toUpperCase()}`;
            const albumGrid = document.getElementById('albumGrid');
            albumGrid.innerHTML = '';
            Object.values(subgenre.artists).forEach(artist => albumGrid.appendChild(makeArtistCard(artist)));
            artistPanel.classList.add('visible');
            document.getElementById('rankingsSection').style.display = 'none';
        }

        function showGenrePanel(genreId) {
            const genre = musicData[genreId];
            if (!genre) return;
            document.getElementById('artistIcon').textContent = genre.icon;
            document.getElementById('artistName').textContent = genre.name;
            document.getElementById('artistSubgenre').textContent = '';
            const albumGrid = document.getElementById('albumGrid');
            albumGrid.innerHTML = '';
            
            // Check if any subgenres are visible in this year
            const visibleSubgenres = Object.entries(genre.subgenres).filter(([subId, subgenre]) => 
                subgenre.status[currentYear] !== 'hidden'
            );
            
            if (visibleSubgenres.length === 0) {
                // No subgenres visible - show origin story
                const origin = genreOrigins[genreId];
                const originDiv = document.createElement('div');
                originDiv.style.cssText = 'padding: 40px 30px; color: var(--gray-400); font-size: 0.9rem; line-height: 1.6; font-style: italic; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 200px;';
                if (origin && currentYear < origin.emergeYear) {
                    originDiv.innerHTML = `<p style="margin-bottom: 12px; color: var(--yellow); font-size: 1.1rem;">${genre.name} doesn't exist yet in ${currentYear}.</p><p style="max-width: 500px;">${origin.story}</p><p style="margin-top: 16px; color: var(--gray-500);">Move the timeline to <strong style="color: var(--pink);">${origin.emergeYear}</strong> or later to explore this genre.</p>`;
                } else {
                    originDiv.innerHTML = `<p>No ${genre.name.toLowerCase()} subgenres active in ${currentYear}. Try a different year.</p>`;
                }
                albumGrid.appendChild(originDiv);
            } else {
                // Show visible subgenres
                visibleSubgenres.forEach(([subId, subgenre]) => {
                    const status = subgenre.status[currentYear];
                    const subgenreHeader = document.createElement('div');
                    subgenreHeader.style.cssText = 'grid-column: 1 / -1; padding: 12px 0 8px 0; border-bottom: 1px solid var(--gray-800); margin-bottom: 8px;';
                    subgenreHeader.innerHTML = `<div style="display: flex; align-items: center; gap: 8px;"><span style="font-size: 1.2rem;">${subgenre.icon}</span><span style="font-size: 0.85rem; font-weight: 600; color: var(--pink);">${subgenre.name}</span><span style="font-size: 0.65rem; color: var(--gray-600); text-transform: uppercase;">${status} Â· ${currentYear}</span></div>`;
                    albumGrid.appendChild(subgenreHeader);
                    Object.values(subgenre.artists).forEach(artist => albumGrid.appendChild(makeArtistCard(artist)));
                });
            }
            
            artistPanel.classList.add('visible');
            document.getElementById('rankingsSection').style.display = 'none';
        }

        function closeArtistPanel() {
            artistPanel.classList.remove('visible');
            selectedGenre = null;
            selectedSubgenre = null;
            renderGenreGroups();
            document.getElementById('rankingsSection').style.display = 'block';
        }

        yearSlider.addEventListener('input', (e) => updateYear(e.target.value));

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && currentYear > MIN_YEAR) { yearSlider.value = currentYear - 1; updateYear(currentYear - 1); }
            if (e.key === 'ArrowRight' && currentYear < MAX_YEAR) { yearSlider.value = currentYear + 1; updateYear(currentYear + 1); }
            if (e.key === 'Escape') closeArtistPanel();
        });

        // Mobile nav toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');
        navToggle.addEventListener('click', () => {
            navLinks.classList.toggle('nav-links--open');
            navToggle.classList.toggle('nav-toggle--open');
        });

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        function buildSearchIndex() {
            const index = [];
            Object.entries(musicData).forEach(([genreId, genre]) => {
                Object.entries(genre.subgenres).forEach(([subId, subgenre]) => {
                    Object.entries(subgenre.artists).forEach(([artistId, artist]) => {
                        // Find the best year to jump to (first album year, or earliest active year)
                        const bestYear = artist.albums.length > 0 ? artist.albums[0].year : null;
                        index.push({
                            name: artist.name,
                            icon: artist.icon,
                            meta: `${subgenre.name} Â· ${genre.name}`,
                            genreId, subId,
                            year: bestYear
                        });
                    });
                });
            });
            return index;
        }

        const searchIndex = buildSearchIndex();

        searchInput.addEventListener('input', () => {
            const q = searchInput.value.trim().toLowerCase();
            if (q.length < 2) { searchResults.classList.remove('open'); return; }
            const matches = searchIndex.filter(item => item.name.toLowerCase().includes(q)).slice(0, 8);
            if (matches.length === 0) { searchResults.classList.remove('open'); return; }
            searchResults.innerHTML = matches.map((m, i) => `
                <div class="search-result-item" data-index="${i}">
                    <span class="result-icon">${m.icon}</span>
                    <span class="result-name">${m.name}</span>
                    <span class="result-meta">${m.meta}</span>
                </div>
            `).join('');
            searchResults.classList.add('open');
            searchResults.querySelectorAll('.search-result-item').forEach((el, i) => {
                el.addEventListener('click', () => {
                    const match = matches[i];
                    if (match.year && match.year >= MIN_YEAR && match.year <= MAX_YEAR) {
                        yearSlider.value = match.year;
                        updateYear(match.year);
                    }
                    selectedGenre = match.genreId;
                    selectedSubgenre = match.subId;
                    showArtistsPanel(match.genreId, match.subId);
                    renderGenreGroups();
                    searchInput.value = '';
                    searchResults.classList.remove('open');
                    // Scroll to the panel
                    artistPanel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                });
            });
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) searchResults.classList.remove('open');
        });

        // Rankings functions
        function getFilteredRankings() {
            let filtered = [...mockRankings];
            
            // Filter by genre (activeFilter from sidebar)
            if (activeFilter !== 'all') {
                filtered = filtered.filter(a => a.genres.includes(activeFilter));
            }
            
            // Filter by year
            if (rankingsYearFilter) {
                filtered = filtered.filter(a => 
                    a.active[0] <= rankingsYearFilter && a.active[1] >= rankingsYearFilter
                );
            }
            
            // Sort by score
            filtered.sort((a, b) => b.score - a.score);
            return filtered;
        }

        function renderRankings() {
            const filtered = getFilteredRankings();
            
            // Update header
            let genreLabel = activeFilter === 'all' ? 'ALL GENRES' : activeFilter.toUpperCase();
            rankingsGenreEl.textContent = genreLabel;
            
            // Update year tag
            if (rankingsYearFilter) {
                rankingsYearTag.textContent = `â€¢ ${rankingsYearFilter}`;
                clearYearLabel.textContent = rankingsYearFilter;
                clearYearBtn.classList.add('visible');
            } else {
                rankingsYearTag.textContent = '';
                clearYearBtn.classList.remove('visible');
            }
            
            // Update count
            rankingsCount.textContent = `${filtered.length} artist${filtered.length !== 1 ? 's' : ''}`;
            
            // Render list
            if (filtered.length === 0) {
                rankingsList.innerHTML = '<div class="no-rankings">No artists found for this filter</div>';
                return;
            }
            
            rankingsList.innerHTML = filtered.map((artist, idx) => `
                <div class="ranking-row" data-artist-id="${artist.id}">
                    <span class="ranking-rank ${idx < 3 ? 'top-3' : ''}">#${idx + 1}</span>
                    <span class="ranking-name">${artist.name}</span>
                    <div class="ranking-bar-container">
                        <div class="ranking-bar" style="width: ${artist.score}%"></div>
                    </div>
                    <span class="ranking-score">${artist.score}</span>
                </div>
            `).join('');
            
            // Add click handlers
            rankingsList.querySelectorAll('.ranking-row').forEach(row => {
                row.addEventListener('click', () => {
                    const artistId = row.dataset.artistId;
                    const artist = mockRankings.find(a => a.id === artistId);
                    const rank = getFilteredRankings().findIndex(a => a.id === artistId) + 1;
                    if (artist) openArtistPopup(artist, rank);
                });
            });
        }

        function openArtistPopup(artist, rank) {
            document.getElementById('popupArtistName').textContent = artist.name;
            const genreLabel = artist.genres[0].charAt(0).toUpperCase() + artist.genres[0].slice(1);
            document.getElementById('popupArtistRank').textContent = `#${rank} in ${genreLabel}`;
            document.getElementById('popupArtistScore').textContent = `Score: ${artist.score}`;
            document.getElementById('popupArtistYears').textContent = `${artist.active[0]}â€“${artist.active[1]}`;
            
            const albumGrid = document.getElementById('popupAlbumGrid');
            albumGrid.innerHTML = artist.albums.map(album => `
                <div class="popup-album">
                    <div class="popup-album-art">ðŸ’¿</div>
                    <div class="popup-album-title">${album.title}</div>
                    <div class="popup-album-year">${album.year}</div>
                </div>
            `).join('');
            
            artistPopupOverlay.classList.add('open');
        }

        function closeArtistPopup() {
            artistPopupOverlay.classList.remove('open');
        }

        // Popup event listeners
        document.getElementById('popupClose').addEventListener('click', closeArtistPopup);
        artistPopupOverlay.addEventListener('click', (e) => {
            if (e.target === artistPopupOverlay) closeArtistPopup();
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeArtistPopup();
        });

        // Clear year filter
        clearYearBtn.addEventListener('click', () => {
            rankingsYearFilter = null;
            renderRankings();
        });

        // Initial render
        updateDecadeButtons();
        renderAlbumBars();
        renderGenreGroups();
        renderRankings();
    </script>
</body>
</html>
